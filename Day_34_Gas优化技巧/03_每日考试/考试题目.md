# Day 34 æ¯æ—¥è€ƒè¯•ï¼šGas ä¼˜åŒ–æŠ€å·§

**è€ƒè¯•æ—¶é—´**ï¼š60 åˆ†é’Ÿ  
**æ€»åˆ†**ï¼š100 åˆ†

---

## ğŸ“ ç¬¬ä¸€éƒ¨åˆ†ï¼šé€‰æ‹©é¢˜ï¼ˆ40 åˆ†ï¼Œæ¯é¢˜ 2 åˆ†ï¼‰

### 1. Aptos Gas è®¡è´¹æ¨¡å‹åŒ…æ‹¬å“ªäº›éƒ¨åˆ†ï¼Ÿ
A. ä»…æ‰§è¡Œ Gas  
B. æ‰§è¡Œ Gas + å­˜å‚¨ Gas  
C. æ‰§è¡Œ Gas + å­˜å‚¨ Gas + IO Gas  
D. æ‰§è¡Œ Gas + ç½‘ç»œ Gas

### 2. åœ¨ Aptos ä¸­ï¼Œå†™å…¥å­˜å‚¨çš„æˆæœ¬å¤§çº¦æ˜¯è¯»å–çš„å¤šå°‘å€ï¼Ÿ
A. 2 å€  
B. 5 å€  
C. 10-20 å€  
D. 100 å€

### 3. ä»¥ä¸‹å“ªç§æ•°æ®ç±»å‹å ç”¨ç©ºé—´æœ€å°ï¼Ÿ
A. bool  
B. u8  
C. u64  
D. u256

### 4. æ•°æ®æ‰“åŒ…ï¼ˆBit Packingï¼‰çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
A. æé«˜ä»£ç å¯è¯»æ€§  
B. å‡å°‘å­˜å‚¨ç©ºé—´å ç”¨  
C. åŠ å¿«è®¡ç®—é€Ÿåº¦  
D. ç®€åŒ–ä»£ç é€»è¾‘

### 5. ä»¥ä¸‹å“ªä¸ªå¾ªç¯ä¼˜åŒ–æŠ€å·§æœ€æœ‰æ•ˆï¼Ÿ
A. ä½¿ç”¨ for å¾ªç¯ä»£æ›¿ while å¾ªç¯  
B. ç¼“å­˜ vector::length() çš„ç»“æœ  
C. å¢åŠ å¾ªç¯æ¬¡æ•°  
D. ä½¿ç”¨é€’å½’ä»£æ›¿å¾ªç¯

### 6. åœ¨ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨ Table è€Œä¸æ˜¯ vectorï¼Ÿ
A. æ•°æ®é‡å°‘äº 10 ä¸ª  
B. éœ€è¦é¢‘ç¹éå†  
C. æ•°æ®é‡è¶…è¿‡ 10000 ä¸ª  
D. éœ€è¦ä¿æŒé¡ºåº

### 7. æ‰¹é‡æ“ä½œç›¸æ¯”å•ä¸ªæ“ä½œçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
A. ä»£ç æ›´ç®€å•  
B. åˆ†æ‘Šå›ºå®šæˆæœ¬  
C. æ›´å®¹æ˜“è°ƒè¯•  
D. æ›´å®‰å…¨

### 8. ä»¥ä¸‹å“ªç§ä¼˜åŒ–æ–¹å¼çš„ Gas èŠ‚çœæ•ˆæœæœ€æ˜¾è‘—ï¼Ÿ
A. ä½¿ç”¨ä½è¿ç®—ä»£æ›¿åŠ æ³•  
B. å‡å°‘å‡½æ•°è°ƒç”¨  
C. ä¼˜åŒ–å­˜å‚¨ç»“æ„  
D. å¾ªç¯å±•å¼€

### 9. ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½ï¼ˆLazy Loadingï¼‰ï¼Ÿ
A. å»¶è¿Ÿæ‰§è¡Œå‡½æ•°  
B. åªåœ¨éœ€è¦æ—¶æ‰è¯»å–æ•°æ®  
C. æ¨è¿Ÿå†™å…¥æ“ä½œ  
D. å‡æ…¢ç¨‹åºæ‰§è¡Œ

### 10. ä½¿ç”¨ä½è¿ç®— x >> 3 ç­‰ä»·äºï¼š
A. x / 2  
B. x / 4  
C. x / 8  
D. x * 8

### 11. SimpleMap é€‚ç”¨äºå¤šå°‘æ•°é‡çº§çš„æ•°æ®ï¼Ÿ
A. < 10  
B. 10-100  
C. 100-10000  
D. > 100000

### 12. åœ¨æ¡ä»¶åˆ†æ”¯ä¼˜åŒ–ä¸­ï¼Œåº”è¯¥å¦‚ä½•æ’åºæ¡ä»¶ï¼Ÿ
A. æŒ‰å­—æ¯é¡ºåº  
B. æŒ‰æ¦‚ç‡é™åº  
C. æŒ‰æ¦‚ç‡å‡åº  
D. éšæœºæ’åº

### 13. æ‰¹é‡æ“ä½œçš„æ‰¹æ¬¡å¤§å°ä¸Šé™åº”è¯¥è€ƒè™‘ä»€ä¹ˆï¼Ÿ
A. ä»£ç é•¿åº¦  
B. Gas é™åˆ¶å’Œäº¤æ˜“å¤§å°  
C. ç”¨æˆ·æ•°é‡  
D. æœåŠ¡å™¨æ€§èƒ½

### 14. ä»¥ä¸‹å“ªç§æƒ…å†µä¸é€‚åˆä½¿ç”¨æ•°æ®æ‰“åŒ…ï¼Ÿ
A. å¤šä¸ª bool å­—æ®µ  
B. å¤šä¸ª u8 å­—æ®µ  
C. å­—æ®µç‹¬ç«‹è®¿é—®é¢‘ç¹  
D. å­˜å‚¨æˆæœ¬æ•æ„Ÿ

### 15. èµ„æºå…±äº«æ¨¡å¼çš„ä¸»è¦æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ
A. å¤šä¸ªç”¨æˆ·å…±äº«ä¸€ä¸ªè´¦æˆ·  
B. ä½¿ç”¨å…¨å±€é»˜è®¤é…ç½®ï¼Œä»…å­˜å‚¨è‡ªå®šä¹‰å€¼  
C. å…±äº«ä»£ç é€»è¾‘  
D. å…±äº«ç½‘ç»œè¿æ¥

### 16. ä»¥ä¸‹å“ªä¸ªä¸æ˜¯ Gas ä¼˜åŒ–çš„ç»´åº¦ï¼Ÿ
A. å­˜å‚¨ä¼˜åŒ–  
B. è®¡ç®—ä¼˜åŒ–  
C. UI ä¼˜åŒ–  
D. æ‰¹é‡æ“ä½œ

### 17. åœ¨ Move ä¸­ï¼Œå¦‚ä½•æµ‹é‡å‡½æ•°çš„ Gas æ¶ˆè€—ï¼Ÿ
A. ä½¿ç”¨ timer  
B. ä½¿ç”¨ gas_profiler  
C. æ‰‹åŠ¨è®¡ç®—  
D. æ— æ³•æµ‹é‡

### 18. åˆå¹¶å¤šä¸ªé™¤æ³•è¿ç®— (a / b / c) åº”è¯¥æ”¹å†™ä¸ºï¼š
A. (a / b) / c  
B. a / (b / c)  
C. a / (b * c)  
D. (a * b) / c

### 19. è¿‡åº¦ä¼˜åŒ–çš„ä¸»è¦é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ
A. Gas æ¶ˆè€—å¢åŠ   
B. ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§ä¸‹é™  
C. æ‰§è¡Œé€Ÿåº¦å˜æ…¢  
D. å ç”¨æ›´å¤šå­˜å‚¨

### 20. Gas ä¼˜åŒ–çš„é¦–è¦åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ
A. ä¼˜åŒ–æ‰€æœ‰ä»£ç   
B. å…ˆæµ‹é‡ï¼Œè¯†åˆ«çƒ­ç‚¹ï¼Œå†ä¼˜åŒ–  
C. ä½¿ç”¨æœ€å¤æ‚çš„ç®—æ³•  
D. å‡å°‘ä»£ç è¡Œæ•°

---

## ğŸ’» ç¬¬äºŒéƒ¨åˆ†ï¼šç¼–ç¨‹é¢˜ï¼ˆ60 åˆ†ï¼‰

### ç¼–ç¨‹é¢˜ 1ï¼šæ•°æ®æ‰“åŒ…å®ç°ï¼ˆ20 åˆ†ï¼‰

å®ç°ä¸€ä¸ªæ‰“åŒ…çš„è®¢å•çŠ¶æ€ç»“æ„ï¼š

**éœ€æ±‚**ï¼š
```move
// å°†ä»¥ä¸‹å­—æ®µæ‰“åŒ…åˆ°ä¸€ä¸ª u128ï¼š
// - order_id: u32 (32 bits)
// - status: u8 (8 bits)  // 0=pending, 1=confirmed, 2=shipped, 3=delivered
// - priority: u8 (8 bits) // 0-255
// - is_paid: bool (1 bit)
// - is_gift: bool (1 bit)
// - quantity: u16 (16 bits)
// - discount_rate: u8 (8 bits) // 0-100
// - warehouse_id: u8 (8 bits)
// - reserved: å‰©ä½™ä½

struct PackedOrder has store, drop {
    data: u128,
}

// å®ç°ä»¥ä¸‹å‡½æ•°ï¼š
public fun create_order(
    order_id: u32,
    status: u8,
    priority: u8,
    is_paid: bool,
    is_gift: bool,
    quantity: u16,
    discount_rate: u8,
    warehouse_id: u8
): PackedOrder

public fun get_order_id(order: &PackedOrder): u32

public fun get_status(order: &PackedOrder): u8

public fun set_status(order: &mut PackedOrder, status: u8)

public fun is_paid(order: &PackedOrder): bool
```

**è¯„åˆ†æ ‡å‡†**ï¼š
- æ­£ç¡®å®ç°æ‰“åŒ…é€»è¾‘ï¼ˆ8 åˆ†ï¼‰
- æ‰€æœ‰è®¿é—®å‡½æ•°æ­£ç¡®ï¼ˆ8 åˆ†ï¼‰
- è¾¹ç•Œæƒ…å†µå¤„ç†ï¼ˆ2 åˆ†ï¼‰
- ä»£ç æ¸…æ™°æœ‰æ³¨é‡Šï¼ˆ2 åˆ†ï¼‰

---

### ç¼–ç¨‹é¢˜ 2ï¼šå¾ªç¯å’Œæ‰¹é‡ä¼˜åŒ–ï¼ˆ20 åˆ†ï¼‰

ä¼˜åŒ–ä¸€ä¸ªä»£å¸åˆ†å‘å‡½æ•°ï¼š

**åˆå§‹ä»£ç **ï¼ˆæœªä¼˜åŒ–ï¼‰ï¼š
```move
// å•ä¸ªè½¬è´¦
public entry fun distribute_tokens_v1(
    admin: &signer,
    recipients: vector<address>,
    amounts: vector<u64>
) acquires TokenStore {
    let i = 0;
    while (i < vector::length(&recipients)) {
        let recipient = *vector::borrow(&recipients, i);
        let amount = *vector::borrow(&amounts, i);
        
        // å•ä¸ªè½¬è´¦é€»è¾‘
        transfer_single(admin, recipient, amount);
        
        i = i + 1;
    }
}
```

**ä»»åŠ¡**ï¼š
1. è¯†åˆ« Gas æµªè´¹ç‚¹
2. å®ç°ä¼˜åŒ–ç‰ˆæœ¬ `distribute_tokens_v2`
3. æ·»åŠ æ‰¹é‡å¤„ç†ä¼˜åŒ–
4. å®ç°å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†

**è¯„åˆ†æ ‡å‡†**ï¼š
- æ­£ç¡®è¯†åˆ«ä¼˜åŒ–ç‚¹ï¼ˆ4 åˆ†ï¼‰
- å¾ªç¯ä¼˜åŒ–å®ç°ï¼ˆ6 åˆ†ï¼‰
- æ‰¹é‡å¤„ç†ä¼˜åŒ–ï¼ˆ6 åˆ†ï¼‰
- é”™è¯¯å¤„ç†å®Œå–„ï¼ˆ4 åˆ†ï¼‰

---

### ç¼–ç¨‹é¢˜ 3ï¼šGas Profiler å®ç°ï¼ˆ20 åˆ†ï¼‰

å®ç°ä¸€ä¸ªç®€å•çš„ Gas å¯¹æ¯”å·¥å…·ï¼š

**éœ€æ±‚**ï¼š
```move
module gas_optimization::profiler {
    use std::string::String;
    
    struct BenchmarkResult has drop {
        name: String,
        iterations: u64,
        total_gas: u64,
        avg_gas: u64,
    }
    
    struct ComparisonReport has drop {
        baseline_name: String,
        baseline_gas: u64,
        optimized_name: String,
        optimized_gas: u64,
        gas_saved: u64,
        improvement_percent: u64,
    }
    
    // å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š
    
    // 1. è¿è¡Œå‡½æ•° n æ¬¡å¹¶è®°å½• Gas
    public fun benchmark(
        name: String,
        iterations: u64,
        func: || 
    ): BenchmarkResult
    
    // 2. å¯¹æ¯”ä¸¤ä¸ªå®ç°
    public fun compare(
        baseline_name: String,
        baseline_func: ||,
        optimized_name: String,
        optimized_func: ||,
        iterations: u64
    ): ComparisonReport
    
    // 3. ç”ŸæˆæŠ¥å‘Š
    public fun generate_report(
        results: vector<BenchmarkResult>
    ): String
}
```

**ä»»åŠ¡**ï¼š
1. å®ç° benchmark å‡½æ•°
2. å®ç° compare å‡½æ•°
3. å®ç° generate_report å‡½æ•°
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

**è¯„åˆ†æ ‡å‡†**ï¼š
- benchmark å®ç°æ­£ç¡®ï¼ˆ6 åˆ†ï¼‰
- compare å®ç°æ­£ç¡®ï¼ˆ6 åˆ†ï¼‰
- æŠ¥å‘Šç”ŸæˆåŠŸèƒ½ï¼ˆ4 åˆ†ï¼‰
- æµ‹è¯•ç”¨ä¾‹å®Œæ•´ï¼ˆ4 åˆ†ï¼‰

---

## ğŸ“Š è¯„åˆ†è¯´æ˜

### é€‰æ‹©é¢˜è¯„åˆ†
- æ¯é¢˜ 2 åˆ†
- ç­”å¯¹å¾—åˆ†ï¼Œç­”é”™ä¸æ‰£åˆ†
- æ€»è®¡ 40 åˆ†

### ç¼–ç¨‹é¢˜è¯„åˆ†
- ç¼–ç¨‹é¢˜ 1: 20 åˆ†
- ç¼–ç¨‹é¢˜ 2: 20 åˆ†
- ç¼–ç¨‹é¢˜ 3: 20 åˆ†
- æ€»è®¡ 60 åˆ†

### æ€»åˆ†
- æ»¡åˆ† 100 åˆ†
- 90+ ä¼˜ç§€
- 80-89 è‰¯å¥½
- 70-79 ä¸­ç­‰
- 60-69 åŠæ ¼
- <60 éœ€è¦å¤ä¹ 

---

## âœ… æäº¤è¦æ±‚

1. **é€‰æ‹©é¢˜**ï¼šåœ¨ç­”é¢˜å¡ä¸Šå¡«å†™ç­”æ¡ˆï¼ˆA/B/C/Dï¼‰

2. **ç¼–ç¨‹é¢˜**ï¼š
   - æäº¤å®Œæ•´çš„ `.move` æºæ–‡ä»¶
   - ç¡®ä¿ä»£ç å¯ä»¥ç¼–è¯‘é€šè¿‡
   - åŒ…å«å¿…è¦çš„æµ‹è¯•ç”¨ä¾‹
   - æ·»åŠ æ¸…æ™°çš„æ³¨é‡Š

3. **æ–‡ä»¶å‘½å**ï¼š
   ```
   exam_answers/
   â”œâ”€â”€ choices.txt           # é€‰æ‹©é¢˜ç­”æ¡ˆ
   â”œâ”€â”€ problem1.move         # ç¼–ç¨‹é¢˜1
   â”œâ”€â”€ problem2.move         # ç¼–ç¨‹é¢˜2
   â””â”€â”€ problem3.move         # ç¼–ç¨‹é¢˜3
   ```

---

## ğŸ’¡ ç­”é¢˜æç¤º

### é€‰æ‹©é¢˜æŠ€å·§
- ä»”ç»†é˜…è¯»é¢˜ç›®
- å›é¡¾ç†è®ºå­¦ä¹ å†…å®¹
- æ’é™¤æ˜æ˜¾é”™è¯¯é€‰é¡¹
- åŸºäºå®é™…ç»éªŒåˆ¤æ–­

### ç¼–ç¨‹é¢˜æŠ€å·§
- å…ˆç†è§£éœ€æ±‚
- ç”»å‡ºæ•°æ®ç»“æ„
- å†™å‡ºä¼ªä»£ç 
- é€æ­¥å®ç°
- å……åˆ†æµ‹è¯•
- æ·»åŠ æ³¨é‡Š

### æ—¶é—´åˆ†é…å»ºè®®
- é€‰æ‹©é¢˜ï¼š20 åˆ†é’Ÿ
- ç¼–ç¨‹é¢˜ 1ï¼š12 åˆ†é’Ÿ
- ç¼–ç¨‹é¢˜ 2ï¼š12 åˆ†é’Ÿ
- ç¼–ç¨‹é¢˜ 3ï¼š12 åˆ†é’Ÿ
- æ£€æŸ¥ï¼š4 åˆ†é’Ÿ

---

## ğŸ” è€ƒè¯•é‡ç‚¹

é‡ç‚¹è€ƒå¯Ÿï¼š
1. âœ… Aptos Gas æœºåˆ¶ç†è§£
2. âœ… å­˜å‚¨ä¼˜åŒ–æŠ€å·§
3. âœ… è®¡ç®—ä¼˜åŒ–æŠ€å·§
4. âœ… æ‰¹é‡æ“ä½œå®ç°
5. âœ… ä½æ“ä½œè¿ç”¨
6. âœ… æ•°æ®ç»“æ„é€‰æ‹©
7. âœ… æ€§èƒ½æµ‹è¯•æ–¹æ³•

---

**ç¥ä½ è€ƒè¯•é¡ºåˆ©ï¼ğŸ“**

è®°ä½ï¼šGas ä¼˜åŒ–ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ï¼
