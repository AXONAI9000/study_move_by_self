# Day 14: ä»£å¸ç®¡ç†åŠŸèƒ½

## ğŸ“š å­¦ä¹ ç›®æ ‡

ä»Šå¤©ä½ å°†å­¦ä¹ ï¼š
- æŒæ¡ä»£å¸çš„é“¸é€ ï¼ˆMintï¼‰å’Œé”€æ¯ï¼ˆBurnï¼‰æœºåˆ¶
- ç†è§£è´¦æˆ·å†»ç»“ï¼ˆFreezeï¼‰åŠŸèƒ½çš„å®ç°å’Œåº”ç”¨
- å­¦ä¹ æƒé™ç®¡ç†ç³»ç»Ÿï¼ˆMintCapability, BurnCapability, FreezeCapabilityï¼‰
- å®ç°ä»£å¸ä¾›åº”é‡æ§åˆ¶ç­–ç•¥
- æŒæ¡å¤šç­¾åå’Œæ—¶é—´é”æœºåˆ¶
- äº†è§£ä»£å¸å‡çº§å’Œè¿ç§»æ–¹æ¡ˆ

## ğŸ¯ ä¸ºä»€ä¹ˆé‡è¦

**ä»£å¸ç®¡ç†åŠŸèƒ½**æ˜¯æ„å»ºä¸“ä¸šçº§ä»£å¸ç³»ç»Ÿçš„å…³é”®ï¼š

- **ä¾›åº”é‡æ§åˆ¶**ï¼šé€šè¿‡é“¸é€ /é”€æ¯å®ç°ç»æµæ¨¡å‹
- **åˆè§„è¦æ±‚**ï¼šå†»ç»“åŠŸèƒ½æ»¡è¶³ç›‘ç®¡éœ€æ±‚ï¼ˆå¦‚ USDCï¼‰
- **å®‰å…¨ç®¡ç†**ï¼šæƒé™åˆ†ç¦»é™ä½é£é™©
- **ç»æµæ¿€åŠ±**ï¼šçµæ´»çš„ä¾›åº”ç­–ç•¥é©±åŠ¨ç”Ÿæ€å‘å±•

**çœŸå®æ¡ˆä¾‹**ï¼š
- **USDC**ï¼šä½¿ç”¨å†»ç»“åŠŸèƒ½æ»¡è¶³ç›‘ç®¡è¦æ±‚
- **APT**ï¼šé€šè¿‡å®šæœŸé”€æ¯æ§åˆ¶é€šèƒ€
- **DeFi åè®®**ï¼šé“¸é€ å¥–åŠ±ä»£å¸æ¿€åŠ±ç”¨æˆ·
- **DAO**ï¼šä½¿ç”¨å¤šç­¾ç®¡ç†é“¸é€ æƒé™

## ğŸ’° å˜ç°æœºä¼š

æŒæ¡ä»£å¸ç®¡ç†åï¼Œä½ å¯ä»¥ï¼š
1. **ä»£å¸ç»æµè®¾è®¡**ï¼šä¸ºé¡¹ç›®è®¾è®¡ä»£å¸æ¨¡å‹ï¼ˆ$2000-$5000/é¡¹ç›®ï¼‰
2. **åˆè§„ä»£å¸å¼€å‘**ï¼šå¼€å‘ç¬¦åˆç›‘ç®¡è¦æ±‚çš„ä»£å¸ï¼ˆ$5000+ï¼‰
3. **DeFi åè®®å¼€å‘**ï¼šæ„å»ºå¤æ‚çš„æ¿€åŠ±æœºåˆ¶
4. **å®¡è®¡æœåŠ¡**ï¼šå®¡æŸ¥ä»£å¸ç®¡ç†å®‰å…¨æ€§ï¼ˆ$3000+/é¡¹ç›®ï¼‰

## ğŸ“– ä»Šæ—¥è¯¾ç¨‹å®‰æ’

### 1. ç†è®ºå­¦ä¹ ï¼ˆ2 å°æ—¶ï¼‰
- é˜…è¯» `01_ç†è®ºå­¦ä¹ /æ ¸å¿ƒæ¦‚å¿µ.md`
- ç†è§£ä¸‰å¤§æƒé™ç³»ç»Ÿ
- å­¦ä¹ ä¾›åº”é‡æ§åˆ¶ç­–ç•¥
- ç ”ç©¶ `01_ç†è®ºå­¦ä¹ /ä»£ç ç¤ºä¾‹.move`

### 2. å®è·µä»»åŠ¡ï¼ˆ3.5 å°æ—¶ï¼‰
å®Œæˆ `02_å®è·µä»»åŠ¡/ä»»åŠ¡è¯´æ˜.md` ä¸­çš„ä»»åŠ¡ï¼š
- ä»»åŠ¡ 1ï¼šå®ç°å®Œæ•´çš„æƒé™ç®¡ç†ç³»ç»Ÿ
- ä»»åŠ¡ 2ï¼šæ„å»ºé€šç¼©ä»£å¸ï¼ˆDeflationary Tokenï¼‰
- ä»»åŠ¡ 3ï¼šå¼€å‘å¤šç­¾åä»£å¸ç®¡ç†ç³»ç»Ÿ

### 3. æ¯æ—¥è€ƒè¯•ï¼ˆ1 å°æ—¶ï¼‰
- å®Œæˆé€‰æ‹©é¢˜ï¼ˆ30 é¢˜ï¼‰
- å®Œæˆç¼–ç¨‹é¢˜ï¼ˆ3 é¢˜ï¼‰
- å¯¹ç…§ç­”æ¡ˆè‡ªæˆ‘è¯„åˆ†

### 4. å¤ä¹ æ€»ç»“ï¼ˆ0.5 å°æ—¶ï¼‰
- æ•´ç†ä»£å¸ç®¡ç†æœ€ä½³å®è·µ
- è®°å½•å®‰å…¨æ£€æŸ¥æ¸…å•
- å‡†å¤‡æ˜å¤©çš„ AMM å­¦ä¹ 

## ğŸ“‹ æ ¸å¿ƒçŸ¥è¯†ç‚¹é¢„è§ˆ

### ä¸‰å¤§æƒé™èƒ½åŠ›

```
æƒé™ç³»ç»Ÿ
â”œâ”€â”€ MintCapability<CoinType>      // é“¸é€ æƒé™
â”‚   â”œâ”€â”€ åˆ›å»ºæ–°ä»£å¸
â”‚   â”œâ”€â”€ æ§åˆ¶ä¾›åº”é‡å¢é•¿
â”‚   â””â”€â”€ å®ç°å¥–åŠ±åˆ†å‘
â”œâ”€â”€ BurnCapability<CoinType>      // é”€æ¯æƒé™
â”‚   â”œâ”€â”€ æ°¸ä¹…ç§»é™¤ä»£å¸
â”‚   â”œâ”€â”€ å®ç°é€šç¼©æœºåˆ¶
â”‚   â””â”€â”€ å›æ”¶ä»£å¸
â””â”€â”€ FreezeCapability<CoinType>    // å†»ç»“æƒé™
    â”œâ”€â”€ å†»ç»“è´¦æˆ·
    â”œâ”€â”€ è§£å†»è´¦æˆ·
    â””â”€â”€ åˆè§„ç®¡ç†
```

### æ ¸å¿ƒæ“ä½œ

```move
// é“¸é€ ä»£å¸
coin::mint<MyCoin>(amount, &mint_cap)

// é”€æ¯ä»£å¸
coin::burn<MyCoin>(coin, &burn_cap)

// å†»ç»“è´¦æˆ·
coin::freeze_coin_store<MyCoin>(addr, &freeze_cap)

// è§£å†»è´¦æˆ·
coin::unfreeze_coin_store<MyCoin>(addr, &freeze_cap)

// è½¬ç§»æƒé™
// å°† capability ä»ä¸€ä¸ªè´¦æˆ·è½¬ç§»åˆ°å¦ä¸€ä¸ªè´¦æˆ·
```

### ä¾›åº”é‡ç®¡ç†ç­–ç•¥

```
å›ºå®šä¾›åº”ï¼š
- åˆå§‹é“¸é€ å…¨éƒ¨ä»£å¸
- é”€æ¯ MintCapability
- æ€»é‡ä¸å˜

é€šèƒ€æ¨¡å‹ï¼š
- ä¿ç•™ MintCapability
- å®šæœŸé“¸é€ æ–°ä»£å¸
- å®ç°å¥–åŠ±åˆ†å‘

é€šç¼©æ¨¡å‹ï¼š
- ä½¿ç”¨ BurnCapability
- äº¤æ˜“æ‰‹ç»­è´¹é”€æ¯
- å®šæœŸå›è´­é”€æ¯

æ··åˆæ¨¡å‹ï¼š
- åŒæ—¶ä½¿ç”¨é“¸é€ å’Œé”€æ¯
- åŠ¨æ€è°ƒèŠ‚ä¾›åº”é‡
- ç»´æŒä»·æ ¼ç¨³å®š
```

## ğŸ”‘ å…³é”®æ¦‚å¿µ

### 1. æƒé™åˆ†ç¦»åŸåˆ™

```move
// âŒ ä¸å¥½ï¼šæ‰€æœ‰æƒé™é›†ä¸­åœ¨ä¸€ä¸ªè´¦æˆ·
struct AllCapabilities has key {
    mint_cap: MintCapability<MyCoin>,
    burn_cap: BurnCapability<MyCoin>,
    freeze_cap: FreezeCapability<MyCoin>,
}

// âœ“ å¥½ï¼šæƒé™åˆ†ç¦»åˆ°ä¸åŒè´¦æˆ·/è§’è‰²
struct MintManager has key {
    mint_cap: MintCapability<MyCoin>,
}

struct ComplianceManager has key {
    freeze_cap: FreezeCapability<MyCoin>,
}
```

### 2. æ—¶é—´é”æœºåˆ¶

```move
struct TimeLock has key {
    unlock_time: u64,
    mint_cap: MintCapability<MyCoin>,
}

// åªæœ‰åœ¨ unlock_time ä¹‹åæ‰èƒ½ä½¿ç”¨æƒé™
```

### 3. å¤šç­¾åæ§åˆ¶

```move
struct MultiSigMint has key {
    required_signatures: u64,
    signers: vector<address>,
    mint_cap: MintCapability<MyCoin>,
}

// éœ€è¦å¤šä¸ªç­¾åæ‰èƒ½æ‰§è¡Œé“¸é€ 
```

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Coin Module](https://aptos.dev/reference/move?branch=mainnet&page=aptos-framework/doc/coin.md)
- [Managed Coin](https://github.com/aptos-labs/aptos-core/tree/main/aptos-move/move-examples/managed_coin)
- [Capability Pattern](https://move-book.com/advanced-topics/capability.html)

### å¼€æºé¡¹ç›®
- [USDC on Aptos](https://github.com/circlefin/aptos-usdc) - åˆè§„å†»ç»“åŠŸèƒ½
- [LayerZero Bridge](https://github.com/LayerZero-Labs) - è·¨é“¾ä»£å¸ç®¡ç†
- [Thala Token](https://github.com/ThalaLabs) - å¤æ‚çš„ä»£å¸ç»æµ

### å·¥å…·
- [Aptos MultiSig](https://aptos.dev/guides/system-integrators-guide/#multisig-accounts) - å¤šç­¾è´¦æˆ·
- [Timelock Tools](https://github.com/aptos-labs/aptos-core/tree/main/aptos-move/move-examples/timelock)

## âœ… å®Œæˆæ ‡å‡†

ä»Šæ—¥å­¦ä¹ å®Œæˆåï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- [ ] ç†è§£ä¸‰å¤§æƒé™èƒ½åŠ›çš„ä½œç”¨å’Œé£é™©
- [ ] å®ç°å®‰å…¨çš„é“¸é€ å’Œé”€æ¯æœºåˆ¶
- [ ] æŒæ¡è´¦æˆ·å†»ç»“/è§£å†»åŠŸèƒ½
- [ ] è®¾è®¡åˆç†çš„æƒé™ç®¡ç†æ¶æ„
- [ ] å®ç°æ—¶é—´é”å’Œå¤šç­¾æ§åˆ¶
- [ ] äº†è§£ä¸åŒçš„ä¾›åº”é‡ç­–ç•¥
- [ ] å®Œæˆæ‰€æœ‰å®è·µä»»åŠ¡
- [ ] è€ƒè¯•æˆç»©è¾¾åˆ° 70 åˆ†ä»¥ä¸Š

## ğŸ’¡ å­¦ä¹ å»ºè®®

### 1. å®‰å…¨ç¬¬ä¸€
ä»£å¸ç®¡ç†åŠŸèƒ½ç›´æ¥å½±å“ç»æµå®‰å…¨ï¼ŒåŠ¡å¿…ï¼š
- ä»”ç»†è®¾è®¡æƒé™æ¶æ„
- å¤šæ¬¡æµ‹è¯•å…³é”®åŠŸèƒ½
- è€ƒè™‘æç«¯æƒ…å†µ
- è¿›è¡Œå®‰å…¨å®¡è®¡

### 2. å‚è€ƒçœŸå®é¡¹ç›®
é˜…è¯» USDC å’Œå…¶ä»–æˆç†Ÿé¡¹ç›®çš„ä»£ç ï¼š
```bash
# Circle USDC æºç 
https://github.com/circlefin/aptos-usdc
```

### 3. æƒé™ç®¡ç†æ£€æŸ¥æ¸…å•
- [ ] è°æœ‰é“¸é€ æƒé™ï¼Ÿ
- [ ] é“¸é€ æœ‰é™é¢å—ï¼Ÿ
- [ ] æƒé™å¯ä»¥è½¬ç§»å—ï¼Ÿ
- [ ] æƒé™å¯ä»¥æ’¤é”€å—ï¼Ÿ
- [ ] æœ‰ç´§æ€¥æš‚åœæœºåˆ¶å—ï¼Ÿ

## âš ï¸ å¸¸è§é™·é˜±

### 1. æƒé™æ°¸ä¹…ä¸¢å¤±

```move
// âŒ å±é™©ï¼šæƒé™è¢«é”€æ¯åæ— æ³•æ¢å¤
fun destroy_mint_cap(mint_cap: MintCapability<MyCoin>) {
    let MintCapability {} = mint_cap;  // æ°¸ä¹…é”€æ¯
}

// âœ“ æ›´å¥½ï¼šè½¬ç§»åˆ°å®‰å…¨è´¦æˆ·
fun transfer_mint_cap(
    mint_cap: MintCapability<MyCoin>,
    to: address
) {
    move_to(&create_signer(to), MintManager { mint_cap });
}
```

### 2. æ— é™åˆ¶é“¸é€ 

```move
// âŒ å±é™©ï¼šæ²¡æœ‰é™é¢æ£€æŸ¥
public fun mint(amount: u64, mint_cap: &MintCapability<MyCoin>) {
    coin::mint(amount, mint_cap);  // å¯ä»¥æ— é™é“¸é€ 
}

// âœ“ å®‰å…¨ï¼šæ·»åŠ é™é¢
const MAX_MINT_PER_DAY: u64 = 1000000 * 100000000;  // 100ä¸‡ä¸ªå¸

public fun mint_with_limit(
    amount: u64,
    mint_cap: &MintCapability<MyCoin>
) acquires MintLimit {
    let limit = borrow_global_mut<MintLimit>(@admin);
    assert!(amount <= MAX_MINT_PER_DAY, ERROR_EXCEED_LIMIT);
    // ... é“¸é€ é€»è¾‘
}
```

### 3. å†»ç»“æ»¥ç”¨

```move
// âš ï¸ å†»ç»“æƒé™éœ€è¦ä¸¥æ ¼æ§åˆ¶
// ä¸åº”è¯¥ç”±å•ä¸€ä¸ªäººæŒæ¡
// éœ€è¦å¤šç­¾æˆ–æ²»ç†æµç¨‹
```

### 4. ä¾›åº”é‡ä¸ä¸€è‡´

```move
// âŒ é—®é¢˜ï¼šæ‰‹åŠ¨ç»´æŠ¤æ€»ä¾›åº”é‡
struct MySupply has key {
    total: u64,  // å¯èƒ½ä¸å®é™…ä¸åŒæ­¥
}

// âœ“ ä½¿ç”¨æ¡†æ¶æä¾›çš„ä¾›åº”é‡è¿½è¸ª
let supply = coin::supply<MyCoin>();
```

## ğŸ¯ å®æˆ˜æŠ€å·§

### 1. åˆ†é˜¶æ®µé“¸é€ 

```move
struct VestingSchedule has key {
    total_amount: u64,
    released_amount: u64,
    start_time: u64,
    duration: u64,
    mint_cap: MintCapability<MyCoin>,
}

// æŒ‰æ—¶é—´é€æ­¥é‡Šæ”¾ä»£å¸
public fun release_vested_tokens() acquires VestingSchedule {
    let schedule = borrow_global_mut<VestingSchedule>(@admin);
    let now = timestamp::now_seconds();
    let elapsed = now - schedule.start_time;
    
    let should_release = (schedule.total_amount * elapsed) / schedule.duration;
    let to_release = should_release - schedule.released_amount;
    
    if (to_release > 0) {
        let coins = coin::mint(to_release, &schedule.mint_cap);
        // åˆ†å‘ä»£å¸...
        schedule.released_amount = should_release;
    }
}
```

### 2. ç´§æ€¥æš‚åœ

```move
struct EmergencyControl has key {
    paused: bool,
    admin: address,
}

public fun mint_with_pause_check(...) acquires EmergencyControl {
    let control = borrow_global<EmergencyControl>(@admin);
    assert!(!control.paused, ERROR_PAUSED);
    // ç»§ç»­é“¸é€ ...
}
```

### 3. é”€æ¯æ‰‹ç»­è´¹

```move
const BURN_FEE_PERCENTAGE: u64 = 1;  // 1%

public entry fun transfer_with_burn(
    from: &signer,
    to: address,
    amount: u64
) acquires Capabilities {
    let burn_amount = (amount * BURN_FEE_PERCENTAGE) / 100;
    let transfer_amount = amount - burn_amount;
    
    // æå–ä»£å¸
    let coins = coin::withdraw<MyCoin>(from, amount);
    
    // åˆ†ç¦»è¦é”€æ¯çš„éƒ¨åˆ†
    let burn_coins = coin::extract(&mut coins, burn_amount);
    
    // é”€æ¯æ‰‹ç»­è´¹
    let caps = borrow_global<Capabilities>(@admin);
    coin::burn(burn_coins, &caps.burn_cap);
    
    // è½¬è´¦å‰©ä½™éƒ¨åˆ†
    coin::deposit(to, coins);
}
```

## ğŸ“Š ä»£å¸ç»æµæ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | é“¸é€  | é”€æ¯ | é€‚ç”¨åœºæ™¯ | æ¡ˆä¾‹ |
|------|------|------|---------|------|
| å›ºå®šä¾›åº” | ä¸€æ¬¡æ€§ | ä¸æ”¯æŒ | ä»·å€¼å­˜å‚¨ | Bitcoin |
| é€šèƒ€æ¨¡å‹ | å®šæœŸ | ä¸æ”¯æŒ | å¥–åŠ±åˆ†å‘ | Ethereum |
| é€šç¼©æ¨¡å‹ | ä¸æ”¯æŒ | æ‰‹ç»­è´¹é”€æ¯ | ä»·å€¼å¢é•¿ | BNB |
| æ··åˆæ¨¡å‹ | çµæ´» | çµæ´» | ç¨³å®šå¸ | USDC |
| ç®—æ³•ç¨³å®š | åŠ¨æ€ | åŠ¨æ€ | ä»·æ ¼ç¨³å®š | USTï¼ˆå¤±è´¥æ¡ˆä¾‹ï¼‰ |

## ğŸ”§ å¼€å‘ç¯å¢ƒ

### ç¼–è¯‘é¡¹ç›®
```bash
cd Day_14_ä»£å¸ç®¡ç†åŠŸèƒ½
aptos move compile
```

### è¿è¡Œæµ‹è¯•
```bash
aptos move test
```

### éƒ¨ç½²
```bash
aptos move publish
```

## ğŸŒŸ ä»Šæ—¥ç›®æ ‡

å®Œæˆä»Šå¤©çš„å­¦ä¹ åï¼Œä½ å°†ï¼š
1. âœ… æŒæ¡å®Œæ•´çš„ä»£å¸ç®¡ç†ä½“ç³»
2. âœ… èƒ½å¤Ÿè®¾è®¡å®‰å…¨çš„æƒé™æ¶æ„
3. âœ… ç†è§£ä¸åŒç»æµæ¨¡å‹çš„å®ç°
4. âœ… ä¸ºåç»­ DeFi å¼€å‘å¥ å®šåŸºç¡€

---

**é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š7 å°æ—¶  
**éš¾åº¦ç­‰çº§**ï¼šâ­â­â­â­â˜†  
**é‡è¦ç¨‹åº¦**ï¼šâ­â­â­â­â­

æŒæ¡ä»£å¸ç®¡ç†æ˜¯æˆä¸º DeFi ä¸“å®¶çš„å¿…ç»ä¹‹è·¯ï¼ğŸš€ğŸ’
