# Day 14 每日考试：代币管理功能 - 选择题

**考试时间**：30 分钟  
**总分**：100 分  
**及格分数**：70 分

---

## 一、基础概念题（每题 2 分，共 40 分）

### 1. 以下关于 MintCapability 的说法，哪个是**错误**的？
A. MintCapability 具有 `key` 能力  
B. MintCapability 具有 `store` 能力  
C. MintCapability 可以被复制（copy）  
D. MintCapability 只能在 `coin::initialize()` 时创建

<details>
<summary>答案</summary>
C - MintCapability 没有 copy 能力，不能被复制
</details>

---

### 2. 调用 `coin::mint()` 后返回的是什么？
A. 直接存入指定账户  
B. 返回 `Coin<CoinType>` 对象  
C. 返回 u64 数量  
D. 返回 MintCapability

<details>
<summary>答案</summary>
B - 返回 Coin<CoinType> 对象，需要手动存入账户
</details>

---

### 3. 以下哪个函数可以永久销毁 MintCapability？
A. `coin::burn_mint_cap()`  
B. `coin::destroy_mint_cap()`  
C. `coin::delete_mint_cap()`  
D. `coin::remove_mint_cap()`

<details>
<summary>答案</summary>
B - coin::destroy_mint_cap() 永久销毁铸造权限
</details>

---

### 4. 冻结账户后，该账户可以进行什么操作？
A. 只能接收代币  
B. 只能发送代币  
C. 可以查询余额  
D. 以上都不可以

<details>
<summary>答案</summary>
C - 冻结后只能查询余额，不能收发代币
</details>

---

### 5. 在 `coin::initialize()` 中，最后一个 `bool` 参数表示什么？
A. 是否启用冻结功能  
B. 是否追踪总供应量  
C. 是否允许销毁  
D. 是否启用多签名

<details>
<summary>答案</summary>
B - true 表示追踪总供应量，false 表示不追踪
</details>

---

### 6. phantom 类型参数的主要作用是什么？
A. 提高性能  
B. 只用于类型标识，不存储数据  
C. 增加安全性  
D. 减少 gas 费用

<details>
<summary>答案</summary>
B - phantom 类型参数仅用于类型系统，不存储实际数据
</details>

---

### 7. 以下哪个操作会减少代币总供应量？
A. `coin::transfer()`  
B. `coin::withdraw()`  
C. `coin::burn()`  
D. `coin::freeze()`

<details>
<summary>答案</summary>
C - coin::burn() 永久销毁代币，减少总供应量
</details>

---

### 8. 一个代币合约最多可以有几个 MintCapability？
A. 无限个  
B. 3 个  
C. 1 个  
D. 取决于配置

<details>
<summary>答案</summary>
C - 每个代币类型只有 1 个 MintCapability，在初始化时创建
</details>

---

### 9. 基点（basis point）中，1% 等于多少基点？
A. 1  
B. 10  
C. 100  
D. 1000

<details>
<summary>答案</summary>
C - 1% = 100 基点，10000 基点 = 100%
</details>

---

### 10. 以下哪个能力（ability）是 MintCapability 必须具备的？
A. copy  
B. drop  
C. store  
D. 以上都不是

<details>
<summary>答案</summary>
C - MintCapability 具有 key 和 store 能力
</details>

---

### 11. 时间锁（Timelock）的主要目的是什么？
A. 提高性能  
B. 为关键操作添加延迟保护  
C. 减少 gas 费用  
D. 增加代币价值

<details>
<summary>答案</summary>
B - 时间锁为关键操作添加延迟，提供安全缓冲期
</details>

---

### 12. 在多签名系统中，`required_signatures` 表示什么？
A. 总签名者数量  
B. 执行提案所需的最少签名数  
C. 当前已签名数量  
D. 最大签名数量

<details>
<summary>答案</summary>
B - required_signatures 是执行提案所需的最少签名数
</details>

---

### 13. 通缩模型的核心机制是什么？
A. 增加铸造  
B. 减少转账  
C. 自动销毁部分代币  
D. 冻结账户

<details>
<summary>答案</summary>
C - 通缩模型通过自动销毁部分代币来减少供应量
</details>

---

### 14. `coin::extract()` 函数的作用是什么？
A. 从账户提取代币  
B. 从 Coin 对象中分离指定数量  
C. 销毁代币  
D. 冻结代币

<details>
<summary>答案</summary>
B - extract() 从 Coin 对象中分离出指定数量，返回新的 Coin
</details>

---

### 15. 日铸造限额的主要安全作用是什么？
A. 节省 gas  
B. 防止无限制铸造  
C. 提高转账速度  
D. 增加流动性

<details>
<summary>答案</summary>
B - 日铸造限额防止权限被滥用导致无限制铸造
</details>

---

### 16. 以下哪个是固定供应量代币的特征？
A. 保留 MintCapability  
B. 销毁 MintCapability  
C. 保留 BurnCapability  
D. 销毁 BurnCapability

<details>
<summary>答案</summary>
B - 固定供应量代币需要销毁 MintCapability
</details>

---

### 17. `coin::is_coin_store_frozen()` 返回什么类型？
A. u64  
B. bool  
C. address  
D. String

<details>
<summary>答案</summary>
B - 返回 bool，true 表示已冻结
</details>

---

### 18. 在 Vesting（释放）计划中，cliff 是什么意思？
A. 释放期  
B. 锁定期  
C. 总数量  
D. 受益人

<details>
<summary>答案</summary>
B - cliff 是锁定期，在此期间不能释放任何代币
</details>

---

### 19. 以下哪个操作需要 FreezeCapability？
A. `coin::mint()`  
B. `coin::burn()`  
C. `coin::freeze_coin_store()`  
D. `coin::transfer()`

<details>
<summary>答案</summary>
C - freeze_coin_store() 需要 FreezeCapability
</details>

---

### 20. 权限分离的最佳实践是什么？
A. 所有权限存储在一个账户  
B. 不同权限存储在不同账户  
C. 销毁所有权限  
D. 复制所有权限

<details>
<summary>答案</summary>
B - 不同权限分离存储在不同账户，降低风险
</details>

---

## 二、进阶应用题（每题 3 分，共 60 分）

### 21. 以下代码的问题是什么？
```move
public fun mint_tokens(amount: u64, mint_cap: &MintCapability<MyCoin>) {
    let coins = coin::mint(amount, mint_cap);
    // 没有 deposit
}
```
A. 缺少权限检查  
B. 铸造的代币会丢失（没有存入账户）  
C. 语法错误  
D. 没有问题

<details>
<summary>答案</summary>
B - 铸造的 Coin 对象没有被存入账户会导致错误
</details>

---

### 22. 如何计算每日铸造限额是否需要重置？
A. 比较时间戳的天数部分  
B. 直接比较时间戳  
C. 使用区块高度  
D. 使用随机数

<details>
<summary>答案</summary>
A - 将时间戳除以 86400（一天的秒数）得到天数，比较是否变化
</details>

---

### 23. 在转账销毁机制中，如果用户转账 1000 代币，销毁率 1%，实际到账多少？
A. 1000  
B. 990  
C. 999  
D. 10

<details>
<summary>答案</summary>
B - 销毁 10 (1%)，实际到账 990
</details>

---

### 24. 多签名提案执行前必须满足什么条件？
A. 所有签名者都签名  
B. 签名数量 >= required_signatures  
C. 提案者签名  
D. 管理员批准

<details>
<summary>答案</summary>
B - 签名数量必须达到或超过 required_signatures
</details>

---

### 25. 以下哪个是时间锁的合理延迟时间？
A. 1 秒  
B. 10 秒  
C. 24 小时（86400 秒）  
D. 1 毫秒

<details>
<summary>答案</summary>
C - 24 小时是常见的时间锁延迟，提供足够的审查时间
</details>

---

### 26. 冻结记录中的 action 字段，0 通常表示什么？
A. 解冻  
B. 冻结  
C. 转账  
D. 销毁

<details>
<summary>答案</summary>
B - 0=冻结，1=解冻
</details>

---

### 27. 以下哪个是合理的 required_signatures 设置（假设有 5 个签名者）？
A. 0  
B. 3  
C. 10  
D. -1

<details>
<summary>答案</summary>
B - 3/5 多签是常见配置，既保证安全又不过于严格
</details>

---

### 28. Vesting 计划中，如果 total=1000，已释放 600，应释放 800，本次释放多少？
A. 1000  
B. 800  
C. 200  
D. 600

<details>
<summary>答案</summary>
C - 应释放 800 - 已释放 600 = 本次释放 200
</details>

---

### 29. 以下哪个操作可以恢复已销毁的代币？
A. `coin::restore()`  
B. `coin::recover()`  
C. `coin::mint()`  
D. 无法恢复

<details>
<summary>答案</summary>
D - 销毁的代币永久不可恢复
</details>

---

### 30. 在合规冻结系统中，reason_code 的作用是什么？
A. 存储冻结金额  
B. 分类冻结原因  
C. 记录操作者  
D. 计算解冻时间

<details>
<summary>答案</summary>
B - reason_code 用于分类冻结原因（如法律要求、可疑活动等）
</details>

---

### 31. 以下代码计算销毁数量是否正确？（假设 amount=1000，rate=100）
```move
let burn_amount = amount * rate / 10000;  // = 10
```
A. 正确  
B. 错误，应该是 rate / amount  
C. 错误，应该先除后乘  
D. 错误，缺少括号

<details>
<summary>答案</summary>
A - 正确：1000 * 100 / 10000 = 10 (1%)
</details>

---

### 32. 提案 ID 通常如何生成？
A. 随机数  
B. 递增计数器  
C. 时间戳  
D. 哈希值

<details>
<summary>答案</summary>
B - 使用递增计数器（next_proposal_id）生成唯一 ID
</details>

---

### 33. 以下哪个是 `#[view]` 函数的特点？
A. 可以修改状态  
B. 只读，不能修改状态  
C. 需要签名者  
D. 会消耗 gas

<details>
<summary>答案</summary>
B - #[view] 函数是只读的，不能修改链上状态
</details>

---

### 34. 回购销毁机制的核心步骤是什么？
A. 冻结 → 销毁  
B. 用资金买入 → 销毁  
C. 铸造 → 转账  
D. 质押 → 解锁

<details>
<summary>答案</summary>
B - 回购销毁：用资金（如 APT）买入代币，然后销毁
</details>

---

### 35. 通胀模型中，年通胀率 5% 用基点表示是多少？
A. 5  
B. 50  
C. 500  
D. 5000

<details>
<summary>答案</summary>
C - 5% = 500 基点
</details>

---

### 36. 在时间锁中，unlock_time 应该如何计算？
A. 当前时间 + 延迟  
B. 当前时间 - 延迟  
C. 当前时间 * 延迟  
D. 当前时间 / 延迟

<details>
<summary>答案</summary>
A - unlock_time = now + delay
</details>

---

### 37. 以下哪个是权限能力的共同特征？
A. 都有 copy 能力  
B. 都有 drop 能力  
C. 都有 key 和 store 能力  
D. 都有 phantom 类型

<details>
<summary>答案</summary>
C - MintCapability、BurnCapability、FreezeCapability 都具有 key 和 store
</details>

---

### 38. 多签名系统中，提案者签名后，signatures 向量长度是多少？
A. 0  
B. 1  
C. required_signatures  
D. 总签名者数量

<details>
<summary>答案</summary>
B - 提案者创建提案时自动添加自己的签名，长度为 1
</details>

---

### 39. 以下哪个是事件（Event）的主要用途？
A. 存储数据  
B. 修改状态  
C. 链下索引和监控  
D. 权限控制

<details>
<summary>答案</summary>
C - 事件主要用于链下系统索引和监控链上活动
</details>

---

### 40. 在 Vesting 中，vesting_duration 表示什么？
A. 锁定期  
B. 释放期  
C. 开始时间  
D. 总数量

<details>
<summary>答案</summary>
B - vesting_duration 是释放期，代币在此期间逐步释放
</details>

---

## 三、案例分析题（每题 10 分，共 30 分）

### 案例 1：安全漏洞识别
某代币合约将所有三个 capability 存储在同一个结构体中：
```move
struct AllCaps has key {
    mint_cap: MintCapability<MyCoin>,
    burn_cap: BurnCapability<MyCoin>,
    freeze_cap: FreezeCapability<MyCoin>,
}
```
**问题**：这种设计有什么潜在风险？应该如何改进？

A. 没有问题，这是最佳实践  
B. 风险：权限过于集中，应该分离存储  
C. 风险：占用空间大，应该删除部分权限  
D. 风险：无法转移，应该添加 copy 能力

<details>
<summary>答案</summary>
B - 所有权限集中在一个账户，如果该账户被攻破，攻击者获得所有权限。应该分离存储到不同账户，实现权限分离。
</details>

---

### 案例 2：铸造限额绕过
攻击者发现某代币的日铸造限额为 1,000,000，他计划在午夜前铸造 1,000,000，午夜后立即再铸造 1,000,000。

**问题**：这种攻击是否可行？如何防范？

A. 可行，无法防范  
B. 不可行，日限额会累计  
C. 可行，应该添加月限额或总限额  
D. 不可行，时间锁会阻止

<details>
<summary>答案</summary>
C - 这种攻击是可行的，因为日限额在每天午夜重置。应该添加更长周期的限额（如月限额）或累计总限额来防范。
</details>

---

### 案例 3：冻结权限滥用
某代币的 compliance_admin 账户私钥泄露，攻击者开始随意冻结用户账户。

**问题**：以下哪种机制可以最有效地防止这种攻击？

A. 增加冻结费用  
B. 对冻结操作实施多签名控制  
C. 删除冻结功能  
D. 设置冻结数量限制

<details>
<summary>答案</summary>
B - 对冻结操作实施多签名控制，即使单个私钥泄露，也需要多个签名者同意才能冻结账户，大大提高安全性。
</details>

---

## 总结

- **第一部分（基础概念）**：40 分
- **第二部分（进阶应用）**：60 分
- **第三部分（案例分析）**：30 分

**总分**：130 分（按 100 分制计算）

**建议学习重点**：
1. 三大权限能力的区别和使用场景
2. 铸造限额和时间锁的实现原理
3. 多签名系统的工作流程
4. 通缩和通胀模型的经济学原理
5. 权限分离的最佳实践

完成考试后，请对照答案解析查看详细解释！🎯
