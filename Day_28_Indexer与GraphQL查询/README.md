# Day 28: Indexer ä¸ GraphQL æŸ¥è¯¢

## ğŸ“‹ å­¦ä¹ ç›®æ ‡

ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥å­¦ä¹  Aptos Indexer å’Œ GraphQL æŸ¥è¯¢ï¼ŒæŒæ¡å¦‚ä½•é«˜æ•ˆè·å–å’Œåˆ†æé“¾ä¸Šæ•°æ®ã€‚Indexer æ˜¯è¿æ¥åŒºå—é“¾å’Œåº”ç”¨çš„æ¡¥æ¢ï¼Œå¯¹äºæ„å»º DAppã€æ•°æ®åˆ†æå·¥å…·å’Œ MEV æœºå™¨äººè‡³å…³é‡è¦ã€‚

### æ ¸å¿ƒç›®æ ‡
1. ğŸ—ï¸ **ç†è§£ Indexer æ¶æ„** - Aptos Indexer çš„å·¥ä½œåŸç†å’Œæ•°æ®æµ
2. ğŸ“Š **GraphQL æŸ¥è¯¢è¯­æ³•** - æŒæ¡ GraphQL æŸ¥è¯¢è¯­è¨€å’Œé«˜çº§æŠ€å·§
3. ğŸ”„ **å®æ—¶æ•°æ®è®¢é˜…** - ä½¿ç”¨ GraphQL Subscription ç›‘å¬é“¾ä¸Šäº‹ä»¶
4. ğŸ› ï¸ **æ„å»ºæ•°æ®æŸ¥è¯¢å·¥å…·** - å®ç°é«˜æ•ˆçš„æ•°æ®è·å–å’Œå¤„ç†ç³»ç»Ÿ
5. âš¡ **æŸ¥è¯¢ä¼˜åŒ–** - æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ

### å­¦ä¹ æˆæœ
- âœ… ç†è§£ Aptos Indexer çš„å®Œæ•´æ¶æ„
- âœ… æŒæ¡ GraphQL æŸ¥è¯¢è¯­æ³•å’Œæ“ä½œ
- âœ… èƒ½å¤ŸæŸ¥è¯¢è´¦æˆ·ã€äº¤æ˜“ã€äº‹ä»¶ç­‰é“¾ä¸Šæ•°æ®
- âœ… èƒ½å¤Ÿä½¿ç”¨è®¢é˜…åŠŸèƒ½å®æ—¶ç›‘å¬æ•°æ®å˜åŒ–
- âœ… èƒ½å¤Ÿä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½å’Œå¤„ç†å¤§é‡æ•°æ®
- âœ… èƒ½å¤Ÿæ„å»ºå®Œæ•´çš„æ•°æ®æŸ¥è¯¢å·¥å…·

---

## ğŸ“š å­¦ä¹ è·¯çº¿å›¾

```
09:00 - 10:30  ğŸ“– ç†è®ºå­¦ä¹ 
               â”œâ”€ Aptos Indexer æ¶æ„
               â”œâ”€ GraphQL åŸºç¡€
               â”œâ”€ æ•°æ®æ¨¡å‹å’Œ Schema
               â””â”€ è®¢é˜…æœºåˆ¶

10:30 - 11:30  ğŸ’» ä»£ç å­¦ä¹ 
               â”œâ”€ GraphQL æŸ¥è¯¢ç¤ºä¾‹
               â”œâ”€ å¤æ‚æŸ¥è¯¢æ„å»º
               â”œâ”€ è®¢é˜…å®ç°
               â””â”€ é”™è¯¯å¤„ç†

11:30 - 14:30  ğŸ”¨ å®è·µä»»åŠ¡
               â”œâ”€ å®ç°æ•°æ®æŸ¥è¯¢å®¢æˆ·ç«¯
               â”œâ”€ æ„å»ºäº‹ä»¶ç›‘å¬å™¨
               â”œâ”€ å¼€å‘æ•°æ®åˆ†æå·¥å…·
               â””â”€ æ€§èƒ½ä¼˜åŒ–

14:30 - 15:30  ğŸ“ æ¯æ—¥è€ƒè¯•
               â”œâ”€ é€‰æ‹©é¢˜ï¼ˆ20 é¢˜ï¼‰
               â”œâ”€ ç¼–ç¨‹é¢˜ï¼ˆ3 é¢˜ï¼‰
               â””â”€ è‡ªæˆ‘è¯„åˆ†
```

**é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š6-7 å°æ—¶

---

## ğŸ“ å‰ç½®çŸ¥è¯†

åœ¨å¼€å§‹ä»Šå¤©çš„å­¦ä¹ ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»æŒæ¡ï¼š

- âœ… Day 27: Aptos äº¤æ˜“ç»“æ„ä¸è§£æ
- âœ… Day 8: äº‹ä»¶ç³»ç»ŸåŸºç¡€
- âœ… åŸºæœ¬çš„ GraphQL æ¦‚å¿µ
- âœ… HTTP/WebSocket åè®®
- âœ… JSON æ•°æ®æ ¼å¼
- âœ… å¼‚æ­¥ç¼–ç¨‹åŸºç¡€

---

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### ä»€ä¹ˆæ˜¯ Aptos Indexerï¼Ÿ

**Aptos Indexer** æ˜¯ä¸€ä¸ªæ•°æ®ç´¢å¼•æœåŠ¡ï¼Œå°†åŒºå—é“¾æ•°æ®è½¬æ¢ä¸ºç»“æ„åŒ–ã€æ˜“æŸ¥è¯¢çš„æ ¼å¼ã€‚å®ƒé€šè¿‡ GraphQL API æä¾›å¯¹é“¾ä¸Šæ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚

```
åŒºå—é“¾æ•°æ®æµï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Fullnode  â”‚â”€â”€â”€â”€â–¶â”‚   Indexer    â”‚â”€â”€â”€â”€â–¶â”‚   Database   â”‚
â”‚   (åŸå§‹æ•°æ®) â”‚     â”‚   (å¤„ç†å™¨)    â”‚     â”‚  (ç»“æ„åŒ–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ GraphQL API  â”‚
                                         â”‚  (æŸ¥è¯¢æ¥å£)   â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ ä½ çš„åº”ç”¨ç¨‹åº  â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GraphQL æŸ¥è¯¢ç±»å‹

1. **Query** - è¯»å–æ•°æ®ï¼ˆç±»ä¼¼ HTTP GETï¼‰
2. **Mutation** - ä¿®æ”¹æ•°æ®ï¼ˆIndexer ä¸æ”¯æŒï¼‰
3. **Subscription** - å®æ—¶è®¢é˜…æ•°æ®å˜åŒ–

### Indexer æ•°æ®æ¨¡å‹

```
æ ¸å¿ƒæ•°æ®ç±»å‹ï¼š
â”œâ”€ Blocks              # åŒºå—æ•°æ®
â”œâ”€ Transactions        # äº¤æ˜“æ•°æ®
â”œâ”€ Events              # äº‹ä»¶æ•°æ®
â”œâ”€ Accounts            # è´¦æˆ·æ•°æ®
â”œâ”€ Coins               # ä»£å¸ä½™é¢
â”œâ”€ Tokens              # NFT æ•°æ®
â”œâ”€ CurrentTokenOwnerships  # å½“å‰ Token æ‰€æœ‰æƒ
â””â”€ ProcessorStatus     # ç´¢å¼•å™¨çŠ¶æ€
```

---

## ğŸ“ ä»Šæ—¥æ–‡ä»¶ç»“æ„

```
Day_28_Indexerä¸GraphQLæŸ¥è¯¢/
â”œâ”€â”€ README.md                          # ğŸ“˜ æœ¬æ–‡ä»¶ - å­¦ä¹ æŒ‡å—
â”œâ”€â”€ Move.toml                          # âš™ï¸ é¡¹ç›®é…ç½®
â”œâ”€â”€ å­¦ä¹ èµ„æ–™è¯´æ˜.md                     # ğŸ“š é¢å¤–å­¦ä¹ èµ„æº
â”œâ”€â”€ 01_ç†è®ºå­¦ä¹ /
â”‚   â”œâ”€â”€ æ ¸å¿ƒæ¦‚å¿µ.md                    # ğŸ“š è¯¦ç»†ç†è®ºè®²è§£
â”‚   â”‚   â”œâ”€â”€ Indexer æ¶æ„æ·±å…¥
â”‚   â”‚   â”œâ”€â”€ GraphQL è¯­æ³•è¯¦è§£
â”‚   â”‚   â”œâ”€â”€ æ•°æ®æ¨¡å‹å’Œ Schema
â”‚   â”‚   â”œâ”€â”€ è®¢é˜…æœºåˆ¶åŸç†
â”‚   â”‚   â””â”€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
â”‚   â””â”€â”€ ä»£ç ç¤ºä¾‹.move                  # ğŸ’¡ Move åˆçº¦ç¤ºä¾‹
â”‚       â”œâ”€â”€ äº‹ä»¶å®šä¹‰
â”‚       â””â”€â”€ æ•°æ®ç»“æ„
â”œâ”€â”€ 02_å®è·µä»»åŠ¡/
â”‚   â””â”€â”€ ä»»åŠ¡è¯´æ˜.md                    # ğŸ¯ å®è·µä»»åŠ¡è¦æ±‚
â”‚       â”œâ”€â”€ ä»»åŠ¡ä¸€ï¼šGraphQL å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ ä»»åŠ¡äºŒï¼šäº‹ä»¶ç›‘å¬å™¨
â”‚       â”œâ”€â”€ ä»»åŠ¡ä¸‰ï¼šæ•°æ®åˆ†æå·¥å…·
â”‚       â””â”€â”€ ä»»åŠ¡å››ï¼šæ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ 03_æ¯æ—¥è€ƒè¯•/
â”‚   â”œâ”€â”€ é€‰æ‹©é¢˜.md                      # âœï¸ 20é“é€‰æ‹©é¢˜
â”‚   â”œâ”€â”€ ç¼–ç¨‹é¢˜.md                      # ğŸ’» 3é“ç¼–ç¨‹é¢˜
â”‚   â””â”€â”€ ç­”æ¡ˆè§£æ.md                    # âœ… å®Œæ•´ç­”æ¡ˆå’Œè§£æ
â”œâ”€â”€ sources/
â”‚   â”œâ”€â”€ indexer_client.move           # ğŸ” Indexer å®¢æˆ·ç«¯ï¼ˆMove ä¾§ï¼‰
â”‚   â”œâ”€â”€ event_definitions.move        # ğŸ“Š äº‹ä»¶å®šä¹‰
â”‚   â””â”€â”€ data_structures.move          # ğŸ“¦ æ•°æ®ç»“æ„
â””â”€â”€ scripts/
    â”œâ”€â”€ query_examples.ts             # TypeScript æŸ¥è¯¢ç¤ºä¾‹
    â”œâ”€â”€ subscription_example.ts       # è®¢é˜…ç¤ºä¾‹
    â”œâ”€â”€ batch_query.ts                # æ‰¹é‡æŸ¥è¯¢
    â””â”€â”€ performance_test.ts           # æ€§èƒ½æµ‹è¯•
```

---

## ğŸš€ å¼€å§‹å­¦ä¹ 

### Step 1: ç†è®ºå­¦ä¹ ï¼ˆ90åˆ†é’Ÿï¼‰

é˜…è¯» `01_ç†è®ºå­¦ä¹ /æ ¸å¿ƒæ¦‚å¿µ.md`ï¼Œé‡ç‚¹ç†è§£ï¼š

**Indexer æ¶æ„æ·±å…¥ï¼ˆ25åˆ†é’Ÿï¼‰**
- Indexer çš„å·¥ä½œæµç¨‹
- æ•°æ®å¤„ç†ç®¡é“
- å¤„ç†å™¨ï¼ˆProcessorï¼‰æœºåˆ¶
- æ•°æ®å­˜å‚¨ç­–ç•¥
- å»¶è¿Ÿå’Œä¸€è‡´æ€§

**GraphQL è¯­æ³•è¯¦è§£ï¼ˆ30åˆ†é’Ÿï¼‰**
- GraphQL æŸ¥è¯¢è¯­æ³•
- å­—æ®µé€‰æ‹©å’ŒåµŒå¥—
- å‚æ•°å’Œå˜é‡
- ç‰‡æ®µï¼ˆFragmentsï¼‰
- æŒ‡ä»¤ï¼ˆDirectivesï¼‰
- åˆ†é¡µå’Œæ’åº

**æ•°æ®æ¨¡å‹å’Œ Schemaï¼ˆ20åˆ†é’Ÿï¼‰**
- Transactions è¡¨ç»“æ„
- Events è¡¨ç»“æ„
- Accounts è¡¨ç»“æ„
- Coins å’Œ Tokens è¡¨
- è¡¨å…³ç³»å’Œè¿æ¥

**è®¢é˜…æœºåˆ¶åŸç†ï¼ˆ15åˆ†é’Ÿï¼‰**
- WebSocket è¿æ¥
- è®¢é˜…è¯­æ³•
- å®æ—¶æ•°æ®æ¨é€
- é”™è¯¯å¤„ç†å’Œé‡è¿

**å­¦ä¹ å»ºè®®**ï¼š
- ğŸ“ ç»˜åˆ¶ Indexer æ•°æ®æµå›¾
- ğŸ” ç†è§£ GraphQL å’Œ REST çš„åŒºåˆ«
- ğŸ¤” æ€è€ƒå¦‚ä½•ä¼˜åŒ–å¤æ‚æŸ¥è¯¢

### Step 2: ä»£ç å­¦ä¹ ï¼ˆ60åˆ†é’Ÿï¼‰

ç ”ç©¶ `01_ç†è®ºå­¦ä¹ /ä»£ç ç¤ºä¾‹.move` å’Œ `scripts/` ä¸­çš„ç¤ºä¾‹ï¼š

**åŸºç¡€æŸ¥è¯¢ï¼ˆ15åˆ†é’Ÿï¼‰**
- æŸ¥è¯¢è´¦æˆ·ä½™é¢
- æŸ¥è¯¢äº¤æ˜“å†å²
- æŸ¥è¯¢äº‹ä»¶åˆ—è¡¨
- æŸ¥è¯¢ Token æ‰€æœ‰æƒ

**å¤æ‚æŸ¥è¯¢ï¼ˆ20åˆ†é’Ÿï¼‰**
- å¤šè¡¨è¿æ¥æŸ¥è¯¢
- æ¡ä»¶è¿‡æ»¤
- èšåˆå’Œåˆ†ç»„
- åˆ†é¡µå¤„ç†

**è®¢é˜…å®ç°ï¼ˆ15åˆ†é’Ÿï¼‰**
- è®¢é˜…æ–°äº¤æ˜“
- è®¢é˜…ç‰¹å®šäº‹ä»¶
- å¤„ç†è®¢é˜…æ•°æ®
- é”™è¯¯å¤„ç†

**æ€§èƒ½ä¼˜åŒ–ï¼ˆ10åˆ†é’Ÿï¼‰**
- æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§
- æ‰¹é‡æŸ¥è¯¢
- ç¼“å­˜ç­–ç•¥
- è¿æ¥æ± ç®¡ç†

**å­¦ä¹ å»ºè®®**ï¼š
- ğŸ” åœ¨ GraphiQL ä¸­å®é™…è¿è¡ŒæŸ¥è¯¢
- ğŸ’­ ç†è§£æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’
- ğŸ“Š å¯¹æ¯”ä¸åŒæŸ¥è¯¢æ–¹å¼çš„æ€§èƒ½

### Step 3: å®è·µä»»åŠ¡ï¼ˆ3å°æ—¶ï¼‰

å®Œæˆ `02_å®è·µä»»åŠ¡/ä»»åŠ¡è¯´æ˜.md` ä¸­çš„è¦æ±‚ï¼š

**ä»»åŠ¡ä¸€ï¼šGraphQL å®¢æˆ·ç«¯ï¼ˆ60åˆ†é’Ÿï¼‰**
- å®ç° GraphQL å®¢æˆ·ç«¯åº“
- æ”¯æŒæŸ¥è¯¢ã€å˜é‡ã€ç‰‡æ®µ
- é”™è¯¯å¤„ç†å’Œé‡è¯•
- ç¼–å†™å•å…ƒæµ‹è¯•

**ä»»åŠ¡äºŒï¼šäº‹ä»¶ç›‘å¬å™¨ï¼ˆ60åˆ†é’Ÿï¼‰**
- å®ç°å®æ—¶äº‹ä»¶è®¢é˜…
- è¿‡æ»¤ç‰¹å®šäº‹ä»¶ç±»å‹
- æ‰¹é‡å¤„ç†äº‹ä»¶
- æŒä¹…åŒ–å­˜å‚¨

**ä»»åŠ¡ä¸‰ï¼šæ•°æ®åˆ†æå·¥å…·ï¼ˆ45åˆ†é’Ÿï¼‰**
- æŸ¥è¯¢è´¦æˆ·äº¤æ˜“ç»Ÿè®¡
- åˆ†æ Token è½¬ç§»æ¨¡å¼
- ç”Ÿæˆæ•°æ®æŠ¥å‘Š
- å¯è§†åŒ–å±•ç¤º

**ä»»åŠ¡å››ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ15åˆ†é’Ÿï¼‰**
- ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡
- å®ç°ç¼“å­˜æœºåˆ¶
- æ‰¹é‡æ“ä½œ
- æ€§èƒ½æµ‹è¯•

**å®è·µå»ºè®®**ï¼š
- âš¡ å…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†ä¼˜åŒ–
- ğŸ§ª å……åˆ†æµ‹è¯•è¾¹ç•Œæƒ…å†µ
- ğŸ›¡ï¸ å¤„ç†ç½‘ç»œé”™è¯¯å’Œè¶…æ—¶

### Step 4: æ¯æ—¥è€ƒè¯•ï¼ˆ60åˆ†é’Ÿï¼‰

å®Œæˆ `03_æ¯æ—¥è€ƒè¯•/` ä¸­çš„æ‰€æœ‰é¢˜ç›®ï¼š
- 20 é“é€‰æ‹©é¢˜ï¼ˆæ¯é¢˜ 2 åˆ†ï¼‰
- 3 é“ç¼–ç¨‹é¢˜ï¼ˆæ¯é¢˜ 20 åˆ†ï¼‰

**è€ƒè¯•è¦æ±‚**ï¼š
- âœ… ç‹¬ç«‹å®Œæˆï¼Œä¸æŸ¥çœ‹ç­”æ¡ˆ
- â±ï¸ é™æ—¶ 60 åˆ†é’Ÿ
- ğŸ¯ ç›®æ ‡åˆ†æ•° â‰¥ 70 åˆ†

---

## ğŸ’¡ é‡ç‚¹æç¤º

### âš ï¸ å¸¸è§é™·é˜±

1. **å¿½ç•¥åˆ†é¡µé™åˆ¶**
   ```graphql
   # âŒ é”™è¯¯ï¼šå¯èƒ½è¿”å›è¿‡å¤šæ•°æ®
   query {
     transactions {
       hash
       sender
     }
   }
   
   # âœ… æ­£ç¡®ï¼šä½¿ç”¨åˆ†é¡µ
   query {
     transactions(limit: 100, offset: 0) {
       hash
       sender
     }
   }
   ```

2. **è¿‡åº¦åµŒå¥—æŸ¥è¯¢**
   ```graphql
   # âŒ é”™è¯¯ï¼šåµŒå¥—å¤ªæ·±ï¼Œæ€§èƒ½å·®
   query {
     accounts {
       transactions {
         events {
           data
         }
       }
     }
   }
   
   # âœ… æ­£ç¡®ï¼šåˆ†æ­¥æŸ¥è¯¢æˆ–ä½¿ç”¨è¿‡æ»¤
   query {
     accounts(where: {address: {_eq: "0x1"}}) {
       address
       coin_balances {
         amount
       }
     }
   }
   ```

3. **ä¸å¤„ç†è®¢é˜…é”™è¯¯**
   ```typescript
   // âŒ é”™è¯¯ï¼šä¸å¤„ç†æ–­çº¿
   subscription.subscribe(data => {
     process(data);
   });
   
   // âœ… æ­£ç¡®ï¼šå¤„ç†é”™è¯¯å’Œé‡è¿
   subscription.subscribe({
     next: data => process(data),
     error: err => reconnect(),
     complete: () => console.log('Done')
   });
   ```

4. **å¿½ç•¥æŸ¥è¯¢æˆæœ¬**
   ```graphql
   # âŒ é”™è¯¯ï¼šæŸ¥è¯¢æ‰€æœ‰å­—æ®µ
   query {
     transactions {
       hash
       version
       sender
       payload
       events
       changes
       # ... æ‰€æœ‰å­—æ®µ
     }
   }
   
   # âœ… æ­£ç¡®ï¼šåªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
   query {
     transactions {
       hash
       sender
       success
     }
   }
   ```

### ğŸ”‘ å…³é”®è¦ç‚¹

1. **GraphQL æŸ¥è¯¢æœ€ä½³å®è·µ**
   - âœ… åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
   - âœ… ä½¿ç”¨å˜é‡ä»£æ›¿ç¡¬ç¼–ç 
   - âœ… åˆ©ç”¨ç‰‡æ®µå¤ç”¨æŸ¥è¯¢
   - âœ… åˆç†ä½¿ç”¨åˆ†é¡µ
   - âœ… æ·»åŠ é€‚å½“çš„è¿‡æ»¤æ¡ä»¶

2. **è®¢é˜…ä½¿ç”¨æŒ‡å—**
   - **å®æ—¶æ€§è¦æ±‚é«˜**: ä½¿ç”¨è®¢é˜…
   - **æ‰¹é‡æ•°æ®**: ä½¿ç”¨è½®è¯¢æŸ¥è¯¢
   - **å†å²æ•°æ®**: ä½¿ç”¨æ™®é€šæŸ¥è¯¢

3. **æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
   - ä½¿ç”¨ç´¢å¼•å­—æ®µè¿‡æ»¤
   - æ‰¹é‡æŸ¥è¯¢å‡å°‘è¯·æ±‚æ•°
   - å®¢æˆ·ç«¯ç¼“å­˜å¸¸ç”¨æ•°æ®
   - ä½¿ç”¨è¿æ¥æ± 
   - è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´

4. **é”™è¯¯å¤„ç†**
   - ç½‘ç»œé”™è¯¯é‡è¯•
   - æŸ¥è¯¢è¶…æ—¶å¤„ç†
   - æ•°æ®éªŒè¯
   - æ—¥å¿—è®°å½•

---

## ğŸ¯ å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆä»Šå¤©çš„å­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] è§£é‡Š Aptos Indexer çš„æ¶æ„å’Œå·¥ä½œåŸç†
- [ ] ç¼–å†™å„ç§ GraphQL æŸ¥è¯¢è¯­å¥
- [ ] ä½¿ç”¨å˜é‡ã€ç‰‡æ®µå’ŒæŒ‡ä»¤
- [ ] å®ç°åˆ†é¡µå’Œæ’åº
- [ ] æŸ¥è¯¢è´¦æˆ·ã€äº¤æ˜“ã€äº‹ä»¶æ•°æ®
- [ ] ä½¿ç”¨è®¢é˜…ç›‘å¬å®æ—¶æ•°æ®
- [ ] ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- [ ] å¤„ç†æŸ¥è¯¢é”™è¯¯å’Œç½‘ç»œé—®é¢˜
- [ ] æ„å»ºå®Œæ•´çš„æ•°æ®æŸ¥è¯¢å·¥å…·
- [ ] ä¸º DApp å’Œ MEV å·¥å…·æä¾›æ•°æ®æ”¯æŒ

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å¿…è¯»
- [Aptos Indexer Documentation](https://aptos.dev/indexer/)
- [GraphQL Official Guide](https://graphql.org/learn/)
- [Aptos Indexer GraphQL Schema](https://cloud.hasura.io/public/graphiql?endpoint=https://indexer.mainnet.aptoslabs.com/v1/graphql)
- [Indexer Processors](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/indexer-grpc)

### é€‰è¯»
- [GraphQL Best Practices](https://graphql.org/learn/best-practices/)
- [Apollo Client Documentation](https://www.apollographql.com/docs/react/)
- [Hasura GraphQL Engine](https://hasura.io/docs/latest/index/)

### ä»£ç å‚è€ƒ
- [Aptos Indexer SDK](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/typescript/sdk)
- [GraphQL Code Generator](https://the-guild.dev/graphql/codegen)
- [Example Indexer Queries](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/indexer-grpc/indexer-grpc-utils)

---

## ğŸ”— ç›¸å…³èµ„æº

### GraphQL Playground
- **Mainnet**: https://cloud.hasura.io/public/graphiql?endpoint=https://indexer.mainnet.aptoslabs.com/v1/graphql
- **Testnet**: https://cloud.hasura.io/public/graphiql?endpoint=https://indexer.testnet.aptoslabs.com/v1/graphql
- **Devnet**: https://cloud.hasura.io/public/graphiql?endpoint=https://indexer.devnet.aptoslabs.com/v1/graphql

### API ç«¯ç‚¹
```
Mainnet GraphQL: https://indexer.mainnet.aptoslabs.com/v1/graphql
Testnet GraphQL: https://indexer.testnet.aptoslabs.com/v1/graphql
Devnet GraphQL:  https://indexer.devnet.aptoslabs.com/v1/graphql
```

### å·¥å…·
- [GraphiQL](https://github.com/graphql/graphiql) - GraphQL IDE
- [Postman](https://www.postman.com/) - API æµ‹è¯•å·¥å…·
- [Insomnia](https://insomnia.rest/) - API å®¢æˆ·ç«¯

---

## ğŸ“ æ¯æ—¥æ€»ç»“æ¨¡æ¿

å­¦ä¹ å®Œæˆåï¼Œè¯·ç”¨ä»¥ä¸‹æ¨¡æ¿æ€»ç»“ä»Šå¤©çš„å­¦ä¹ ï¼š

```markdown
## Day 28 å­¦ä¹ æ€»ç»“

### å­¦åˆ°çš„å…³é”®æ¦‚å¿µ
1. 
2. 
3. 

### å®Œæˆçš„ä»»åŠ¡
- [ ] ç†è®ºå­¦ä¹ 
- [ ] ä»£ç ç¤ºä¾‹ç ”ç©¶
- [ ] å®è·µä»»åŠ¡
- [ ] æ¯æ—¥è€ƒè¯•

### è€ƒè¯•æˆç»©
- é€‰æ‹©é¢˜ï¼š___/40 åˆ†
- ç¼–ç¨‹é¢˜ï¼š___/60 åˆ†
- æ€»åˆ†ï¼š___/100 åˆ†

### é‡åˆ°çš„å›°éš¾
1. 
2. 

### è§£å†³æ–¹æ¡ˆ
1. 
2. 

### GraphQL æŸ¥è¯¢è¦ç‚¹
- åŸºç¡€æŸ¥è¯¢ï¼š
- å¤æ‚æŸ¥è¯¢ï¼š
- è®¢é˜…ï¼š
- ä¼˜åŒ–æŠ€å·§ï¼š

### å®é™…åº”ç”¨æ€è€ƒ
1. 
2. 

### æ˜å¤©çš„è®¡åˆ’
- å­¦ä¹  Day 29: Mempool ç›‘æ§ä¸äº¤æ˜“è¿½è¸ª
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

å®Œæˆä»Šå¤©çš„å­¦ä¹ åï¼š

1. **å¦‚æœå¾—åˆ† â‰¥ 70 åˆ†**
   - âœ… ç»§ç»­å­¦ä¹  Day 29: Mempool ç›‘æ§ä¸äº¤æ˜“è¿½è¸ª
   - ğŸ’¡ æ€è€ƒå¦‚ä½•ç»“åˆ Day 27 å’Œ Day 28 çš„çŸ¥è¯†
   - ğŸ” ç ”ç©¶çœŸå®é¡¹ç›®çš„ Indexer ä½¿ç”¨æ¡ˆä¾‹

2. **å¦‚æœå¾—åˆ† < 70 åˆ†**
   - ğŸ”„ é‡æ–°å­¦ä¹ ä»Šå¤©çš„ç†è®º
   - ğŸ’» é‡åšå®è·µä»»åŠ¡
   - ğŸ“– é˜…è¯»æ‰©å±•èµ„æ–™
   - ğŸ§ª åœ¨ GraphiQL ä¸­ç»ƒä¹ æ›´å¤šæŸ¥è¯¢

---

## âš¡ å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨ GraphQL æŸ¥è¯¢æ¨¡æ¿

#### 1. æŸ¥è¯¢è´¦æˆ·ä½™é¢
```graphql
query GetAccountBalance($address: String!) {
  current_coin_balances(
    where: {owner_address: {_eq: $address}}
  ) {
    owner_address
    coin_type
    amount
  }
}
```

#### 2. æŸ¥è¯¢äº¤æ˜“å†å²
```graphql
query GetTransactions($address: String!, $limit: Int!) {
  account_transactions(
    where: {account_address: {_eq: $address}}
    limit: $limit
    order_by: {transaction_version: desc}
  ) {
    transaction_version
    transaction_timestamp
    user_transaction {
      sender
      success
      gas_used
      entry_function_id_str
    }
  }
}
```

#### 3. æŸ¥è¯¢äº‹ä»¶
```graphql
query GetEvents($eventType: String!, $limit: Int!) {
  events(
    where: {type: {_eq: $eventType}}
    limit: $limit
    order_by: {transaction_version: desc}
  ) {
    transaction_version
    type
    data
    sequence_number
  }
}
```

#### 4. è®¢é˜…æ–°äº¤æ˜“
```graphql
subscription NewTransactions {
  transactions(
    limit: 10
    order_by: {version: desc}
  ) {
    version
    hash
    sender
    success
  }
}
```

#### 5. æŸ¥è¯¢ NFT
```graphql
query GetNFTs($owner: String!) {
  current_token_ownerships_v2(
    where: {
      owner_address: {_eq: $owner}
      amount: {_gt: "0"}
    }
  ) {
    token_data_id
    amount
    current_token_data {
      token_name
      token_uri
      collection_id
    }
  }
}
```

### åˆ†é¡µæ¨¡æ¿
```graphql
query PaginatedQuery($limit: Int!, $offset: Int!) {
  transactions(
    limit: $limit
    offset: $offset
    order_by: {version: desc}
  ) {
    version
    hash
  }
}
```

### è¿‡æ»¤æ¡ä»¶
```graphql
where: {
  # ç­‰äº
  field: {_eq: "value"}
  
  # ä¸ç­‰äº
  field: {_neq: "value"}
  
  # å¤§äº
  field: {_gt: 100}
  
  # å°äº
  field: {_lt: 100}
  
  # åŒ…å«
  field: {_in: ["value1", "value2"]}
  
  # æ¨¡ç³ŠåŒ¹é…
  field: {_like: "%pattern%"}
  
  # AND æ¡ä»¶
  _and: [
    {field1: {_eq: "value1"}},
    {field2: {_eq: "value2"}}
  ]
  
  # OR æ¡ä»¶
  _or: [
    {field1: {_eq: "value1"}},
    {field2: {_eq: "value2"}}
  ]
}
```

### é”™è¯¯ç é€ŸæŸ¥

```
GraphQL Errors:
- 400: Bad Request - æŸ¥è¯¢è¯­æ³•é”™è¯¯
- 401: Unauthorized - è®¤è¯å¤±è´¥
- 429: Too Many Requests - è¯·æ±‚è¿‡å¤š
- 500: Internal Server Error - æœåŠ¡å™¨é”™è¯¯
- 504: Gateway Timeout - æŸ¥è¯¢è¶…æ—¶

Connection Errors:
- ECONNREFUSED: è¿æ¥è¢«æ‹’ç»
- ETIMEDOUT: è¿æ¥è¶…æ—¶
- ENOTFOUND: DNS æŸ¥è¯¢å¤±è´¥
```

---

## ğŸ” Indexer æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Aptos Fullnode                       â”‚
â”‚  - å¤„ç†äº¤æ˜“                                              â”‚
â”‚  - æ›´æ–°çŠ¶æ€                                              â”‚
â”‚  - å‘å‡ºäº‹ä»¶                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Transaction Stream
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Transaction Stream Service                 â”‚
â”‚  - ç›‘å¬æ–°åŒºå—                                            â”‚
â”‚  - æå–äº¤æ˜“æ•°æ®                                          â”‚
â”‚  - æ¨é€åˆ°å¤„ç†å™¨                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ gRPC Stream
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Indexer Processors                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Coin Processorâ”‚Token Processorâ”‚Event Processorâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ å¤„ç†å’Œè½¬æ¢
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PostgreSQL Database                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Transactionsâ”‚ Events  â”‚ Accounts â”‚  Tokens  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æ•°æ®è®¿é—®
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Hasura GraphQL Engine                  â”‚
â”‚  - è‡ªåŠ¨ç”Ÿæˆ GraphQL Schema                               â”‚
â”‚  - å¤„ç†æŸ¥è¯¢å’Œè®¢é˜…                                        â”‚
â”‚  - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ GraphQL API
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä½ çš„åº”ç”¨ç¨‹åº                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  DApp    â”‚  é’±åŒ…    â”‚åˆ†æå·¥å…·  â”‚MEV æœºå™¨äººâ”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¼ å®æˆ˜ä»·å€¼

ä»Šå¤©å­¦ä¹ çš„ Indexer å’Œ GraphQL æ˜¯æ•°æ®é©±åŠ¨åº”ç”¨çš„åŸºç¡€ï¼š

### çŸ­æœŸä»·å€¼ï¼ˆå­¦ä¹ é˜¶æ®µï¼‰
- ç†è§£é“¾ä¸Šæ•°æ®è·å–æœºåˆ¶
- æŒæ¡ GraphQL æŸ¥è¯¢è¯­è¨€
- å­¦ä¼šé«˜æ•ˆæ•°æ®æ£€ç´¢

### ä¸­æœŸä»·å€¼ï¼ˆ30å¤©åï¼‰
- ä¸º MEV æœºå™¨äººæä¾›æ•°æ®æ”¯æŒ
- å¼€å‘æ•°æ®åˆ†æå·¥å…·
- æ„å»º DApp åç«¯æœåŠ¡

### é•¿æœŸä»·å€¼ï¼ˆ60å¤©åï¼‰
- æä¾›æ•°æ®æœåŠ¡ï¼ˆAPI as a Serviceï¼‰
- å¼€å‘é“¾ä¸Šæ•°æ®åˆ†æå¹³å°
- æ„å»ºè‡ªå®šä¹‰ç´¢å¼•å™¨
- æä¾›æ•°æ®å’¨è¯¢æœåŠ¡

---

## ğŸŒŸ GraphQL æœ€ä½³å®è·µ

### Do's âœ…
1. **ä½¿ç”¨å˜é‡ä»£æ›¿ç¡¬ç¼–ç å€¼**
2. **åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ**
3. **ä½¿ç”¨ç‰‡æ®µå¤ç”¨æŸ¥è¯¢ç»“æ„**
4. **æ·»åŠ åˆç†çš„åˆ†é¡µå’Œé™åˆ¶**
5. **ä½¿ç”¨åˆ«åé¿å…å­—æ®µå†²çª**
6. **å¤„ç†è®¢é˜…çš„æ–­çº¿é‡è¿**
7. **ç¼“å­˜å¸¸ç”¨æŸ¥è¯¢ç»“æœ**
8. **ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢å‡å°‘è¯·æ±‚**

### Don'ts âŒ
1. **ä¸è¦æŸ¥è¯¢è¿‡å¤šæ•°æ®**
2. **ä¸è¦åµŒå¥—è¿‡æ·±**
3. **ä¸è¦å¿½ç•¥é”™è¯¯å¤„ç†**
4. **ä¸è¦åœ¨å¾ªç¯ä¸­æŸ¥è¯¢**
5. **ä¸è¦å¿½è§†æŸ¥è¯¢æ€§èƒ½**
6. **ä¸è¦ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**
7. **ä¸è¦å¿½ç•¥é€Ÿç‡é™åˆ¶**

---

**å‡†å¤‡å¥½æŒæ¡ Aptos æ•°æ®æŸ¥è¯¢äº†å—ï¼ŸLet's dive in! ğŸ“Š**

**ç‰ˆæƒå£°æ˜**: æœ¬è¯¾ç¨‹ææ–™ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

**æ›´æ–°æ—¥æœŸ**: 2025-11-12
