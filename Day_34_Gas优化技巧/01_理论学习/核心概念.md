# Gas ä¼˜åŒ–æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£æ

## ğŸ“š ç›®å½•

1. [Aptos Gas æœºåˆ¶è¯¦è§£](#1-aptos-gas-æœºåˆ¶è¯¦è§£)
2. [å­˜å‚¨ä¼˜åŒ–ç­–ç•¥](#2-å­˜å‚¨ä¼˜åŒ–ç­–ç•¥)
3. [è®¡ç®—ä¼˜åŒ–ç­–ç•¥](#3-è®¡ç®—ä¼˜åŒ–ç­–ç•¥)
4. [æ‰¹é‡æ“ä½œä¼˜åŒ–](#4-æ‰¹é‡æ“ä½œä¼˜åŒ–)
5. [Gas åˆ†æå·¥å…·](#5-gas-åˆ†æå·¥å…·)
6. [ä¼˜åŒ–æœ€ä½³å®è·µ](#6-ä¼˜åŒ–æœ€ä½³å®è·µ)

---

## 1. Aptos Gas æœºåˆ¶è¯¦è§£

### 1.1 Gas è®¡è´¹æ¨¡å‹

Aptos é‡‡ç”¨å¤šç»´åº¦çš„ Gas è®¡è´¹æ¨¡å‹ï¼š

```
æ€» Gas æˆæœ¬ = æ‰§è¡Œ Gas + å­˜å‚¨ Gas + IO Gas

æ‰§è¡Œ Gasï¼š
â”œâ”€ æŒ‡ä»¤æ‰§è¡Œæˆæœ¬ï¼ˆåŸºäºæ“ä½œå¤æ‚åº¦ï¼‰
â”œâ”€ å‡½æ•°è°ƒç”¨å¼€é”€
â”œâ”€ ç±»å‹æ“ä½œæˆæœ¬
â””â”€ åŠ å¯†æ“ä½œæˆæœ¬

å­˜å‚¨ Gasï¼š
â”œâ”€ è¯»å–æˆæœ¬ = å­—èŠ‚æ•° Ã— è¯»å–å•ä»·
â”œâ”€ å†™å…¥æˆæœ¬ = å­—èŠ‚æ•° Ã— å†™å…¥å•ä»· + Slot è´¹ç”¨
â”œâ”€ åˆ›å»ºæˆæœ¬ = æ–°èµ„æº/å¯¹è±¡çš„å›ºå®šæˆæœ¬
â””â”€ åˆ é™¤é€€æ¬¾ = é‡Šæ”¾å­˜å‚¨ç©ºé—´çš„é€€æ¬¾

IO Gasï¼š
â”œâ”€ äº¤æ˜“å¤§å°æˆæœ¬
â”œâ”€ ç­¾åéªŒè¯æˆæœ¬
â””â”€ äº‹ä»¶å‘å°„æˆæœ¬
```

### 1.2 Gas è®¡ç®—å…¬å¼

#### æ‰§è¡Œ Gas
```
æ‰§è¡Œ Gas = Î£(æŒ‡ä»¤æˆæœ¬) + Î£(å‡½æ•°è°ƒç”¨æˆæœ¬) + Î£(å†…å­˜æ“ä½œæˆæœ¬)

å¸¸è§æŒ‡ä»¤æˆæœ¬ï¼ˆç¤ºä¾‹ï¼‰ï¼š
- åŸºæœ¬ç®—æœ¯è¿ç®—: 1-2 Gas
- æ¯”è¾ƒæ“ä½œ: 1 Gas
- é€»è¾‘è¿ç®—: 1 Gas
- åˆ†æ”¯è·³è½¬: 1 Gas
- å‡½æ•°è°ƒç”¨: 10-50 Gasï¼ˆå–å†³äºå¤æ‚åº¦ï¼‰
- å‘é‡æ“ä½œ: åŸºç¡€æˆæœ¬ + æ•°æ®é‡æˆæœ¬
```

#### å­˜å‚¨ Gas
```
è¯»å– Gas = bytes_read Ã— READ_PRICE_PER_BYTE

å†™å…¥ Gas = (bytes_written Ã— WRITE_PRICE_PER_BYTE) + 
           (slots_written Ã— SLOT_PRICE)

åˆ›å»º Gas = CREATE_RESOURCE_BASE + 
           (initial_bytes Ã— WRITE_PRICE_PER_BYTE)

å…¶ä¸­ï¼š
- READ_PRICE_PER_BYTE â‰ˆ 300 Gas/byte
- WRITE_PRICE_PER_BYTE â‰ˆ 5000 Gas/byte
- SLOT_PRICE â‰ˆ 100,000 Gas/slot
- CREATE_RESOURCE_BASE â‰ˆ 1,000 Gas
```

### 1.3 Gas ä»·æ ¼æœºåˆ¶

```
å®é™…è´¹ç”¨ (APT) = Gas å•ä½ Ã— Gas ä»·æ ¼

Gas ä»·æ ¼ï¼š
â”œâ”€ æœ€å°ä»·æ ¼: 100 Octas/Gasï¼ˆç½‘ç»œè®¾å®šï¼‰
â”œâ”€ å»ºè®®ä»·æ ¼: æ ¹æ®ç½‘ç»œæ‹¥å µåŠ¨æ€è°ƒæ•´
â”œâ”€ æœ€å¤§ä»·æ ¼: ç”¨æˆ·è®¾ç½®çš„ä¸Šé™
â””â”€ ä¼˜å…ˆçº§: ä»·æ ¼è¶Šé«˜ï¼Œè¶Šå¿«è¢«æ‰“åŒ…

1 APT = 100,000,000 Octas
```

### 1.4 Gas ä¸Šé™

```
Gas é™åˆ¶å±‚çº§ï¼š
1. äº¤æ˜“çº§åˆ«: max_gas_amountï¼ˆç”¨æˆ·è®¾ç½®ï¼‰
2. åŒºå—çº§åˆ«: block_gas_limitï¼ˆå…±è¯†è®¾å®šï¼‰
3. å‡½æ•°çº§åˆ«: é€’å½’æ·±åº¦å’Œå¤æ‚åº¦é™åˆ¶

æ¨èè®¾ç½®ï¼š
- ç®€å•è½¬è´¦: 1,000 - 2,000 Gas
- ä»£å¸äº¤æ¢: 10,000 - 50,000 Gas
- å¤æ‚ DeFi: 100,000 - 500,000 Gas
- æ‰¹é‡æ“ä½œ: 500,000 - 2,000,000 Gas
```

---

## 2. å­˜å‚¨ä¼˜åŒ–ç­–ç•¥

### 2.1 æ•°æ®æ‰“åŒ…ï¼ˆBit Packingï¼‰

å°†å¤šä¸ªå°å­—æ®µæ‰“åŒ…åˆ°ä¸€ä¸ªå¤§å­—æ®µä¸­ï¼š

```move
// âŒ ä½æ•ˆï¼šæ¯ä¸ªå­—æ®µå ç”¨ç‹¬ç«‹çš„å­˜å‚¨æ§½
struct UserStatus {
    is_active: bool,        // 1 bitï¼Œä½†å ç”¨ 1 byte + padding
    is_verified: bool,      // 1 bitï¼Œä½†å ç”¨ 1 byte + padding
    tier: u8,               // 8 bitsï¼Œä½†å ç”¨ 1 byte + padding
    flags: u8,              // 8 bits
    // å®é™…å ç”¨: 4+ bytesï¼ˆå« paddingï¼‰
}

// âœ… é«˜æ•ˆï¼šæ‰“åŒ…åˆ°å•ä¸ª u32
struct UserStatus {
    packed: u32,
    // bit 0: is_active
    // bit 1: is_verified
    // bits 2-9: tier (0-255)
    // bits 10-17: flags
    // bits 18-31: reserved
    // å®é™…å ç”¨: 4 bytes
}

// è®¿é—®å‡½æ•°
public fun is_active(status: &UserStatus): bool {
    (status.packed & 0x01) != 0
}

public fun set_active(status: &mut UserStatus, active: bool) {
    if (active) {
        status.packed = status.packed | 0x01;
    } else {
        status.packed = status.packed & 0xFFFFFFFE;
    }
}
```

**èŠ‚çœåˆ†æ**ï¼š
- å­˜å‚¨ç©ºé—´ï¼šå‡å°‘ 75%
- å†™å…¥æˆæœ¬ï¼šå‡å°‘ 70%+
- è¯»å–æˆæœ¬ï¼šå‡å°‘ 60%+

### 2.2 é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„

```move
// åœºæ™¯ 1: å°æ•°æ®é‡ï¼ˆ< 100 é¡¹ï¼‰
// âœ… ä½¿ç”¨ vector
struct SmallCollection {
    items: vector<Item>,  // é€‚åˆéå†å’Œå°è§„æ¨¡æ“ä½œ
}

// åœºæ™¯ 2: ä¸­ç­‰æ•°æ®é‡ï¼ˆ100-10000 é¡¹ï¼‰
// âœ… ä½¿ç”¨ SimpleMap
use aptos_std::simple_map::{Self, SimpleMap};
struct MediumCollection {
    items: SimpleMap<address, Item>,  // å¹³è¡¡æŸ¥æ‰¾å’Œå­˜å‚¨æˆæœ¬
}

// åœºæ™¯ 3: å¤§æ•°æ®é‡ï¼ˆ> 10000 é¡¹ï¼‰
// âœ… ä½¿ç”¨ Table æˆ– SmartTable
use aptos_std::table::{Self, Table};
struct LargeCollection {
    items: Table<address, Item>,  // æœ€ä½å­˜å‚¨æˆæœ¬
}
```

**å¯¹æ¯”åˆ†æ**ï¼š

| æ•°æ®ç»“æ„ | æ’å…¥ | æŸ¥æ‰¾ | éå† | å­˜å‚¨æˆæœ¬ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|------|---------|---------|
| vector | O(1) | O(n) | O(n) | ä¸­ | å°æ•°æ®ï¼Œé¢‘ç¹éå† |
| SimpleMap | O(n) | O(n) | O(n) | ä¸­ | ä¸­ç­‰æ•°æ®ï¼Œå¹³è¡¡æ“ä½œ |
| Table | O(1) | O(1) | ä¸æ”¯æŒ | ä½ | å¤§æ•°æ®ï¼ŒKV è®¿é—® |
| SmartTable | O(1) | O(1) | O(n) | ä½ | å¤§æ•°æ®ï¼Œéœ€éå† |

### 2.3 å»¶è¿ŸåŠ è½½ä¸æŒ‰éœ€å­˜å‚¨

```move
// âŒ ä½æ•ˆï¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®
struct UserProfile {
    basic_info: BasicInfo,
    detailed_info: DetailedInfo,
    statistics: Statistics,
    preferences: Preferences,
    // å³ä½¿åªéœ€è¦ basic_infoï¼Œä¹Ÿè¦è¯»å–å…¨éƒ¨
}

// âœ… é«˜æ•ˆï¼šåˆ†ç¦»å­˜å‚¨ï¼ŒæŒ‰éœ€åŠ è½½
struct UserBasicProfile has key {
    basic_info: BasicInfo,
}

struct UserDetailedProfile has key {
    detailed_info: DetailedInfo,
}

struct UserStatistics has key {
    statistics: Statistics,
}

// åªåœ¨éœ€è¦æ—¶æ‰è¯»å–é¢å¤–æ•°æ®
public fun get_basic_info(user: address): BasicInfo acquires UserBasicProfile {
    borrow_global<UserBasicProfile>(user).basic_info
}
```

### 2.4 æ•°æ®å‹ç¼©æŠ€å·§

```move
// æŠ€å·§ 1: ä½¿ç”¨æ›´å°çš„æ•´æ•°ç±»å‹
// âŒ æµªè´¹
struct TokenBalance {
    amount: u256,  // å¦‚æœä½™é¢ä¸ä¼šè¶…è¿‡ u64ï¼Œè¿™æ˜¯æµªè´¹
}

// âœ… èŠ‚çœ
struct TokenBalance {
    amount: u64,   // èŠ‚çœ 24 bytes
}

// æŠ€å·§ 2: æ—¶é—´æˆ³å‹ç¼©
// âŒ ä½¿ç”¨å®Œæ•´æ—¶é—´æˆ³ï¼ˆ8 bytesï¼‰
struct Record {
    timestamp: u64,  // å¾®ç§’çº§æ—¶é—´æˆ³
}

// âœ… ä½¿ç”¨ç›¸å¯¹æ—¶é—´ï¼ˆ4 bytesï¼‰
struct Record {
    timestamp_offset: u32,  // ç›¸å¯¹äºæŸä¸ªåŸºå‡†æ—¶é—´çš„ç§’æ•°
}

// æŠ€å·§ 3: ä½¿ç”¨æšä¸¾æ›¿ä»£å­—ç¬¦ä¸²
// âŒ æµªè´¹
struct Order {
    status: String,  // "pending", "completed", "cancelled"
}

// âœ… èŠ‚çœ
struct Order {
    status: u8,  // 0=pending, 1=completed, 2=cancelled
}
```

### 2.5 èµ„æºå…±äº«æ¨¡å¼

```move
// âŒ ä½æ•ˆï¼šæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹å­˜å‚¨é…ç½®
struct UserConfig has key {
    max_slippage: u64,
    deadline: u64,
    router_address: address,
    // å¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨é»˜è®¤å€¼
}

// âœ… é«˜æ•ˆï¼šå…±äº«é»˜è®¤é…ç½®
struct GlobalConfig has key {
    default_max_slippage: u64,
    default_deadline: u64,
    default_router: address,
}

struct UserCustomConfig has key {
    custom_slippage: Option<u64>,  // ä»…åœ¨è‡ªå®šä¹‰æ—¶å­˜å‚¨
    custom_deadline: Option<u64>,
    custom_router: Option<address>,
}
```

---

## 3. è®¡ç®—ä¼˜åŒ–ç­–ç•¥

### 3.1 å¾ªç¯ä¼˜åŒ–

#### ä¼˜åŒ– 1: ç¼“å­˜é•¿åº¦è®¡ç®—

```move
// âŒ ä½æ•ˆï¼šé‡å¤è®¡ç®—é•¿åº¦
fun sum_vector(v: &vector<u64>): u64 {
    let sum = 0;
    let i = 0;
    while (i < vector::length(v)) {  // æ¯æ¬¡è¿­ä»£éƒ½è°ƒç”¨ length()
        sum = sum + *vector::borrow(v, i);
        i = i + 1;
    };
    sum
}

// âœ… é«˜æ•ˆï¼šç¼“å­˜é•¿åº¦
fun sum_vector(v: &vector<u64>): u64 {
    let sum = 0;
    let len = vector::length(v);     // åªè°ƒç”¨ä¸€æ¬¡
    let i = 0;
    while (i < len) {
        sum = sum + *vector::borrow(v, i);
        i = i + 1;
    };
    sum
}

// Gas èŠ‚çœï¼šå¯¹äº n ä¸ªå…ƒç´ ï¼ŒèŠ‚çœ (n-1) Ã— length() è°ƒç”¨æˆæœ¬
```

#### ä¼˜åŒ– 2: å‡å°‘å¾ªç¯æ¬¡æ•°

```move
// âŒ ä½æ•ˆï¼šåµŒå¥—å¾ªç¯
fun find_duplicates(v1: &vector<u64>, v2: &vector<u64>): vector<u64> {
    let result = vector::empty();
    let i = 0;
    let len1 = vector::length(v1);
    while (i < len1) {
        let j = 0;
        let len2 = vector::length(v2);
        while (j < len2) {
            if (*vector::borrow(v1, i) == *vector::borrow(v2, j)) {
                vector::push_back(&mut result, *vector::borrow(v1, i));
            };
            j = j + 1;
        };
        i = i + 1;
    };
    result
}
// æ—¶é—´å¤æ‚åº¦: O(n Ã— m)

// âœ… é«˜æ•ˆï¼šä½¿ç”¨ SimpleMap å‡å°‘æŸ¥æ‰¾
use aptos_std::simple_map::{Self, SimpleMap};

fun find_duplicates(v1: &vector<u64>, v2: &vector<u64>): vector<u64> {
    let result = vector::empty();
    let map = simple_map::create<u64, bool>();
    
    // æ„å»º map: O(m)
    let i = 0;
    let len2 = vector::length(v2);
    while (i < len2) {
        simple_map::add(&mut map, *vector::borrow(v2, i), true);
        i = i + 1;
    };
    
    // æŸ¥æ‰¾: O(n Ã— log m)
    i = 0;
    let len1 = vector::length(v1);
    while (i < len1) {
        let val = *vector::borrow(v1, i);
        if (simple_map::contains_key(&map, &val)) {
            vector::push_back(&mut result, val);
        };
        i = i + 1;
    };
    
    result
}
// æ—¶é—´å¤æ‚åº¦: O(m + n Ã— log m)ï¼Œå½“ m è¾ƒå¤§æ—¶æœ‰æ˜¾è‘—æå‡
```

#### ä¼˜åŒ– 3: å¾ªç¯å±•å¼€

```move
// âŒ å¸¸è§„å¾ªç¯
fun process_4_items(items: &vector<u64>) {
    let i = 0;
    while (i < 4) {
        process_item(vector::borrow(items, i));
        i = i + 1;
    }
}

// âœ… å±•å¼€å¾ªç¯ï¼ˆé€‚ç”¨äºå°å›ºå®šæ¬¡æ•°ï¼‰
fun process_4_items(items: &vector<u64>) {
    process_item(vector::borrow(items, 0));
    process_item(vector::borrow(items, 1));
    process_item(vector::borrow(items, 2));
    process_item(vector::borrow(items, 3));
}

// èŠ‚çœ: å¾ªç¯æ§åˆ¶å¼€é”€ï¼ˆ4 æ¬¡è¿­ä»£åˆ¤æ–­ã€4 æ¬¡é€’å¢ï¼‰
```

### 3.2 æ¡ä»¶åˆ†æ”¯ä¼˜åŒ–

#### ä¼˜åŒ– 1: çŸ­è·¯æ±‚å€¼

```move
// âœ… åˆ©ç”¨çŸ­è·¯ç‰¹æ€§
fun validate_and_process(user: address, amount: u64) acquires UserAccount {
    // å…ˆæ£€æŸ¥æˆæœ¬ä½çš„æ¡ä»¶
    if (amount == 0) return;  // å¿«é€Ÿå¤±è´¥
    if (!account_exists(user)) return;  // æ¬¡ä½æˆæœ¬
    
    // æœ€åæ£€æŸ¥æˆæœ¬é«˜çš„æ¡ä»¶
    let account = borrow_global<UserAccount>(user);
    if (account.balance < amount) return;  // éœ€è¦è¯»å–å­˜å‚¨
    
    // å¤„ç†é€»è¾‘...
}
```

#### ä¼˜åŒ– 2: æŒ‰æ¦‚ç‡æ’åºæ¡ä»¶

```move
// âŒ æœªä¼˜åŒ–
fun get_discount(user_type: u8): u64 {
    if (user_type == VIP_PLATINUM) {     // 1% ç”¨æˆ·
        return 30;
    } else if (user_type == VIP_GOLD) {  // 5% ç”¨æˆ·
        return 20;
    } else if (user_type == VIP_SILVER) {// 15% ç”¨æˆ·
        return 10;
    } else {                              // 79% ç”¨æˆ·
        return 0;
    }
}

// âœ… ä¼˜åŒ–ï¼šæŒ‰æ¦‚ç‡é™åºæ’åˆ—
fun get_discount(user_type: u8): u64 {
    if (user_type == REGULAR) {          // 79% ç”¨æˆ·
        return 0;
    } else if (user_type == VIP_SILVER) {// 15% ç”¨æˆ·
        return 10;
    } else if (user_type == VIP_GOLD) {  // 5% ç”¨æˆ·
        return 20;
    } else {                              // 1% ç”¨æˆ·
        return 30;
    }
}
```

#### ä¼˜åŒ– 3: ä½¿ç”¨æŸ¥æ‰¾è¡¨

```move
// âŒ å¤šé‡åˆ†æ”¯
fun get_tier_threshold(tier: u8): u64 {
    if (tier == 1) {
        return 1000;
    } else if (tier == 2) {
        return 5000;
    } else if (tier == 3) {
        return 10000;
    } else if (tier == 4) {
        return 50000;
    } else {
        return 100000;
    }
}

// âœ… æŸ¥æ‰¾è¡¨ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰
const TIER_THRESHOLDS: vector<u64> = vector[
    1000,    // tier 1
    5000,    // tier 2
    10000,   // tier 3
    50000,   // tier 4
    100000   // tier 5
];

fun get_tier_threshold(tier: u8): u64 {
    *vector::borrow(&TIER_THRESHOLDS, (tier as u64) - 1)
}
```

### 3.3 å‡½æ•°è°ƒç”¨ä¼˜åŒ–

#### ä¼˜åŒ– 1: å‡å°‘å‡½æ•°è°ƒç”¨

```move
// âŒ é¢‘ç¹è°ƒç”¨å°å‡½æ•°
fun calculate_fee(amount: u64, rate: u64): u64 {
    mul_div(amount, rate, 10000)
}

fun mul_div(a: u64, b: u64, c: u64): u64 {
    (a * b) / c
}

fun process_fees(amounts: &vector<u64>, rate: u64): u64 {
    let total = 0;
    let i = 0;
    let len = vector::length(amounts);
    while (i < len) {
        total = total + calculate_fee(*vector::borrow(amounts, i), rate);
        i = i + 1;
    };
    total
}

// âœ… å†…è”ç®€å•è®¡ç®—
fun process_fees(amounts: &vector<u64>, rate: u64): u64 {
    let total = 0;
    let i = 0;
    let len = vector::length(amounts);
    while (i < len) {
        let amount = *vector::borrow(amounts, i);
        total = total + (amount * rate) / 10000;  // å†…è”è®¡ç®—
        i = i + 1;
    };
    total
}
```

#### ä¼˜åŒ– 2: æ‰¹é‡å‚æ•°ä¼ é€’

```move
// âŒ å¤šæ¬¡å‡½æ•°è°ƒç”¨
public fun mint_tokens_one_by_one(
    recipients: vector<address>,
    amounts: vector<u64>
) {
    let i = 0;
    let len = vector::length(&recipients);
    while (i < len) {
        mint_to_single(
            *vector::borrow(&recipients, i),
            *vector::borrow(&amounts, i)
        );  // æ¯æ¬¡è°ƒç”¨éƒ½æœ‰å¼€é”€
        i = i + 1;
    };
}

// âœ… æ‰¹é‡å¤„ç†
public fun mint_tokens_batch(
    recipients: vector<address>,
    amounts: vector<u64>
) {
    // åœ¨ä¸€ä¸ªå‡½æ•°å†…å®Œæˆæ‰€æœ‰æ“ä½œ
    let i = 0;
    let len = vector::length(&recipients);
    while (i < len) {
        // ç›´æ¥å¤„ç†ï¼Œé¿å…å‡½æ•°è°ƒç”¨å¼€é”€
        let recipient = *vector::borrow(&recipients, i);
        let amount = *vector::borrow(&amounts, i);
        // ... mint é€»è¾‘ ...
        i = i + 1;
    };
}
```

### 3.4 æ•°å­¦è¿ç®—ä¼˜åŒ–

```move
// ä¼˜åŒ– 1: ä½è¿ç®—æ›¿ä»£ä¹˜é™¤æ³•
// âŒ å¸¸è§„
fun divide_by_8(x: u64): u64 {
    x / 8
}

// âœ… ä½è¿ç®—
fun divide_by_8(x: u64): u64 {
    x >> 3  // å³ç§» 3 ä½ = é™¤ä»¥ 2^3 = é™¤ä»¥ 8
}

// ä¼˜åŒ– 2: é¿å…é‡å¤è®¡ç®—
// âŒ é‡å¤è®¡ç®—
fun calculate_interest(principal: u64, rate: u64, time: u64): u64 {
    (principal * rate * time) / 10000 / 365
}

// âœ… åˆå¹¶é™¤æ³•
fun calculate_interest(principal: u64, rate: u64, time: u64): u64 {
    (principal * rate * time) / 3650000  // 10000 Ã— 365
}

// ä¼˜åŒ– 3: ä½¿ç”¨æŸ¥æ‰¾è¡¨ä»£æ›¿å¤æ‚è®¡ç®—
const SQRT_LOOKUP: vector<u64> = vector[
    0, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, // sqrt(0) to sqrt(10)
    // ... more values
];

fun fast_sqrt_approx(x: u64): u64 {
    if (x < 100) {
        *vector::borrow(&SQRT_LOOKUP, x)
    } else {
        // å›é€€åˆ°è®¡ç®—æ–¹æ³•
        sqrt_newton(x)
    }
}
```

---

## 4. æ‰¹é‡æ“ä½œä¼˜åŒ–

### 4.1 æ‰¹å¤„ç†çš„ä¼˜åŠ¿

å•ä¸ªæ“ä½œçš„æˆæœ¬ç»“æ„ï¼š
```
å•æ¬¡æ“ä½œæˆæœ¬ = å›ºå®šæˆæœ¬ + å˜åŠ¨æˆæœ¬

å›ºå®šæˆæœ¬ï¼š
â”œâ”€ äº¤æ˜“éªŒè¯
â”œâ”€ ç­¾åæ£€æŸ¥
â”œâ”€ å‡½æ•°å…¥å£å¼€é”€
â””â”€ çŠ¶æ€åˆå§‹åŒ–

å˜åŠ¨æˆæœ¬ï¼š
â”œâ”€ å®é™…æ“ä½œæˆæœ¬
â””â”€ æ•°æ®å¤„ç†æˆæœ¬
```

æ‰¹å¤„ç†ä¼˜åŠ¿ï¼š
```
æ€»æˆæœ¬(æ‰¹é‡) = å›ºå®šæˆæœ¬ + n Ã— å˜åŠ¨æˆæœ¬
æ€»æˆæœ¬(å•ä¸ª) = n Ã— (å›ºå®šæˆæœ¬ + å˜åŠ¨æˆæœ¬)

èŠ‚çœ = n Ã— å›ºå®šæˆæœ¬ - å›ºå®šæˆæœ¬ = (n - 1) Ã— å›ºå®šæˆæœ¬
```

### 4.2 æ‰¹é‡è½¬è´¦å®ç°

```move
// âŒ å•ä¸ªè½¬è´¦
public entry fun transfer_single(
    from: &signer,
    to: address,
    amount: u64
) acquires CoinStore {
    // æ¯æ¬¡è°ƒç”¨éƒ½æœ‰å›ºå®šå¼€é”€
    let from_addr = signer::address_of(from);
    coin::transfer<AptosCoin>(from, to, amount);
}

// âœ… æ‰¹é‡è½¬è´¦
public entry fun transfer_batch(
    from: &signer,
    recipients: vector<address>,
    amounts: vector<u64>
) acquires CoinStore {
    let len = vector::length(&recipients);
    assert!(len == vector::length(&amounts), E_INVALID_LENGTH);
    
    // å›ºå®šæˆæœ¬åªä»˜ä¸€æ¬¡
    let from_addr = signer::address_of(from);
    
    // æ‰¹é‡å¤„ç†
    let i = 0;
    while (i < len) {
        let to = *vector::borrow(&recipients, i);
        let amount = *vector::borrow(&amounts, i);
        coin::transfer<AptosCoin>(from, to, amount);
        i = i + 1;
    };
}

// ç¤ºä¾‹ï¼šè½¬è´¦ç»™ 100 ä¸ªåœ°å€
// å•ä¸ªæ“ä½œ: 100 Ã— (1000 + 500) = 150,000 Gas
// æ‰¹é‡æ“ä½œ: 1000 + 100 Ã— 500 = 51,000 Gas
// èŠ‚çœ: 66%
```

### 4.3 æ‰¹é‡ Mint ä¼˜åŒ–

```move
module gas_optimization::batch_mint {
    use std::signer;
    use std::vector;
    use aptos_framework::coin;
    
    // âŒ ä½æ•ˆï¼šæ¯ä¸ª mint æ“ä½œç‹¬ç«‹
    public fun mint_single<CoinType>(
        mint_cap: &coin::MintCapability<CoinType>,
        to: address,
        amount: u64
    ) {
        let coins = coin::mint(amount, mint_cap);
        coin::deposit(to, coins);
    }
    
    // âœ… é«˜æ•ˆï¼šæ‰¹é‡ mint
    public fun mint_batch<CoinType>(
        mint_cap: &coin::MintCapability<CoinType>,
        recipients: vector<address>,
        amounts: vector<u64>
    ) {
        let len = vector::length(&recipients);
        assert!(len == vector::length(&amounts), E_LENGTH_MISMATCH);
        
        let i = 0;
        while (i < len) {
            let to = *vector::borrow(&recipients, i);
            let amount = *vector::borrow(&amounts, i);
            let coins = coin::mint(amount, mint_cap);
            coin::deposit(to, coins);
            i = i + 1;
        };
    }
    
    // âœ… æ›´ä¼˜ï¼šé¢„åˆ†é…å’Œæ‰¹é‡å¤„ç†
    public fun mint_batch_optimized<CoinType>(
        mint_cap: &coin::MintCapability<CoinType>,
        recipients: vector<address>,
        amounts: vector<u64>
    ) {
        let len = vector::length(&recipients);
        assert!(len == vector::length(&amounts), E_LENGTH_MISMATCH);
        
        // ä¸€æ¬¡æ€§ mint æ€»é‡
        let total = 0;
        let i = 0;
        while (i < len) {
            total = total + *vector::borrow(&amounts, i);
            i = i + 1;
        };
        
        let total_coins = coin::mint(total, mint_cap);
        
        // åˆ†é…ç»™å„ä¸ªæ¥æ”¶è€…
        i = 0;
        while (i < len) {
            let to = *vector::borrow(&recipients, i);
            let amount = *vector::borrow(&amounts, i);
            let coins = coin::extract(&mut total_coins, amount);
            coin::deposit(to, coins);
            i = i + 1;
        };
        
        // é”€æ¯å‰©ä½™ï¼ˆåº”è¯¥ä¸º 0ï¼‰
        coin::destroy_zero(total_coins);
    }
}
```

### 4.4 æ‰¹é‡çŠ¶æ€æ›´æ–°

```move
// âŒ å•ä¸ªæ›´æ–°
public fun update_user_status(
    admin: &signer,
    user: address,
    new_status: u8
) acquires UserRegistry {
    assert_admin(admin);
    let registry = borrow_global_mut<UserRegistry>(@contract);
    // æ›´æ–°å•ä¸ªç”¨æˆ·...
}

// âœ… æ‰¹é‡æ›´æ–°
public fun update_users_status_batch(
    admin: &signer,
    users: vector<address>,
    statuses: vector<u8>
) acquires UserRegistry {
    assert_admin(admin);  // åªæ£€æŸ¥ä¸€æ¬¡
    
    let registry = borrow_global_mut<UserRegistry>(@contract);
    let len = vector::length(&users);
    
    let i = 0;
    while (i < len) {
        let user = *vector::borrow(&users, i);
        let status = *vector::borrow(&statuses, i);
        // æ‰¹é‡æ›´æ–°...
        i = i + 1;
    };
}
```

---

## 5. Gas åˆ†æå·¥å…·

### 5.1 Aptos CLI Gas Profiler

ä½¿ç”¨ Gas Profiler åˆ†æå‡½æ•°è°ƒç”¨ï¼š

```bash
# è¿è¡Œæµ‹è¯•å¹¶å¯ç”¨ Gas åˆ†æ
aptos move test --gas-profiler

# è¾“å‡ºç¤ºä¾‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Function                    â”‚ Gas Used â”‚ % of Total â”‚ Calls â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ transfer_batch              â”‚ 45,231   â”‚ 65.2%      â”‚ 1     â”‚
â”‚   â”œâ”€ verify_signature       â”‚ 12,450   â”‚ 17.9%      â”‚ 1     â”‚
â”‚   â”œâ”€ batch_process          â”‚ 28,901   â”‚ 41.6%      â”‚ 1     â”‚
â”‚   â””â”€ emit_events            â”‚ 3,880    â”‚ 5.6%       â”‚ 1     â”‚
â”‚ update_storage              â”‚ 18,234   â”‚ 26.3%      â”‚ 100   â”‚
â”‚ calculate_fee               â”‚ 5,890    â”‚ 8.5%       â”‚ 100   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ€§èƒ½åŸºå‡†æµ‹è¯•æ¡†æ¶

```move
module gas_optimization::benchmark {
    use std::vector;
    use aptos_framework::timestamp;
    
    struct BenchmarkResult has drop {
        name: vector<u8>,
        gas_used: u64,
        execution_time: u64,
        iterations: u64,
    }
    
    public fun benchmark<T>(
        name: vector<u8>,
        iterations: u64,
        func: |u64| -> T
    ): BenchmarkResult {
        let start_time = timestamp::now_microseconds();
        let start_gas = /* è·å–å½“å‰ Gas ä½¿ç”¨ */;
        
        let i = 0;
        while (i < iterations) {
            func(i);
            i = i + 1;
        };
        
        let end_time = timestamp::now_microseconds();
        let end_gas = /* è·å–å½“å‰ Gas ä½¿ç”¨ */;
        
        BenchmarkResult {
            name,
            gas_used: end_gas - start_gas,
            execution_time: end_time - start_time,
            iterations,
        }
    }
}
```

### 5.3 Gas å¯¹æ¯”å·¥å…·

```typescript
// TypeScript è„šæœ¬ï¼šå¯¹æ¯”ä¼˜åŒ–å‰åçš„ Gas æ¶ˆè€—
import { AptosClient, AptosAccount } from "aptos";

interface GasComparison {
  operation: string;
  beforeGas: number;
  afterGas: number;
  savings: number;
  savingsPercent: number;
}

async function compareGas(
  client: AptosClient,
  account: AptosAccount,
  beforeFunc: string,
  afterFunc: string,
  args: any[]
): Promise<GasComparison> {
  // æµ‹è¯•ä¼˜åŒ–å‰
  const txBefore = await client.generateTransaction(
    account.address(),
    {
      function: beforeFunc,
      arguments: args,
      type_arguments: [],
    }
  );
  const simulationBefore = await client.simulateTransaction(
    account,
    txBefore
  );
  const beforeGas = parseInt(simulationBefore[0].gas_used);
  
  // æµ‹è¯•ä¼˜åŒ–å
  const txAfter = await client.generateTransaction(
    account.address(),
    {
      function: afterFunc,
      arguments: args,
      type_arguments: [],
    }
  );
  const simulationAfter = await client.simulateTransaction(
    account,
    txAfter
  );
  const afterGas = parseInt(simulationAfter[0].gas_used);
  
  return {
    operation: beforeFunc,
    beforeGas,
    afterGas,
    savings: beforeGas - afterGas,
    savingsPercent: ((beforeGas - afterGas) / beforeGas) * 100,
  };
}

// ä½¿ç”¨ç¤ºä¾‹
const results = await compareGas(
  client,
  account,
  "0x1::token::transfer_single",
  "0x1::token::transfer_batch",
  [recipients, amounts]
);

console.log(`
Operation: ${results.operation}
Before:    ${results.beforeGas} Gas
After:     ${results.afterGas} Gas
Savings:   ${results.savings} Gas (${results.savingsPercent.toFixed(2)}%)
`);
```

---

## 6. ä¼˜åŒ–æœ€ä½³å®è·µ

### 6.1 ä¼˜åŒ–å†³ç­–æ ‘

```
æ˜¯å¦éœ€è¦ä¼˜åŒ–ï¼Ÿ
â”œâ”€ æ˜¯é«˜é¢‘è°ƒç”¨å‡½æ•°ï¼Ÿ â”€â”€Yesâ”€â”€> ä¼˜å…ˆä¼˜åŒ–
â”‚                   â””â”€Noâ”€â”€â”
â”œâ”€ Gas æˆæœ¬é«˜ï¼ˆ> 10ä¸‡ï¼‰? â”€â”€Yesâ”€â”€> è€ƒè™‘ä¼˜åŒ–
â”‚                       â””â”€Noâ”€â”€â”
â””â”€ ç”¨æˆ·ä½“éªŒå—å½±å“ï¼Ÿ â”€â”€Yesâ”€â”€â”€â”€â”€â”€â”˜
                    â””â”€Noâ”€â”€> æš‚ä¸ä¼˜åŒ–

å¦‚ä½•ä¼˜åŒ–ï¼Ÿ
1. æµ‹é‡åŸºå‡†ï¼ˆBaselineï¼‰
2. è¯†åˆ«çƒ­ç‚¹ï¼ˆHotspotsï¼‰
3. é€‰æ‹©ç­–ç•¥ï¼ˆStrategyï¼‰
4. å®æ–½ä¼˜åŒ–ï¼ˆOptimizeï¼‰
5. éªŒè¯æ•ˆæœï¼ˆVerifyï¼‰
6. æƒè¡¡å¾—å¤±ï¼ˆTrade-offsï¼‰
```

### 6.2 ä¼˜åŒ–ä¼˜å…ˆçº§

```
ä¼˜å…ˆçº§æ’åºï¼ˆç”±é«˜åˆ°ä½ï¼‰ï¼š

1. å­˜å‚¨ä¼˜åŒ– â­â­â­â­â­
   - å­˜å‚¨æˆæœ¬é€šå¸¸å æ¯” 60-80%
   - ä¼˜åŒ–æ•ˆæœæœ€æ˜æ˜¾
   - ç¤ºä¾‹ï¼šæ•°æ®æ‰“åŒ…ã€ç»“æ„ä¼˜åŒ–

2. æ‰¹é‡æ“ä½œ â­â­â­â­
   - åˆ†æ‘Šå›ºå®šæˆæœ¬
   - é€‚ç”¨äºæ‰¹å¤„ç†åœºæ™¯
   - ç¤ºä¾‹ï¼šæ‰¹é‡è½¬è´¦ã€æ‰¹é‡ mint

3. å¾ªç¯ä¼˜åŒ– â­â­â­
   - å‡å°‘è¿­ä»£æˆæœ¬
   - é€‚ç”¨äºå¤§æ•°æ®é›†
   - ç¤ºä¾‹ï¼šç¼“å­˜é•¿åº¦ã€é¿å…åµŒå¥—

4. è®¡ç®—ä¼˜åŒ– â­â­
   - é™ä½æŒ‡ä»¤æˆæœ¬
   - ä¼˜åŒ–æ•ˆæœç›¸å¯¹è¾ƒå°
   - ç¤ºä¾‹ï¼šä½è¿ç®—ã€æŸ¥æ‰¾è¡¨

5. å‡½æ•°è°ƒç”¨ â­
   - å‡å°‘è°ƒç”¨å¼€é”€
   - è°¨æ…ä½¿ç”¨ï¼Œå¯èƒ½å½±å“å¯è¯»æ€§
   - ç¤ºä¾‹ï¼šå†…è”ã€å‡å°‘é€’å½’
```

### 6.3 ä¼˜åŒ–åæ¨¡å¼

**åæ¨¡å¼ 1: è¿‡åº¦ä¼˜åŒ–**
```move
// âŒ è¿‡åº¦ä¼˜åŒ–ï¼ŒæŸå¤±å¯è¯»æ€§
fun calculate(x: u64, y: u64): u64 {
    ((x << 3) + (x << 1)) * ((y >> 2) + (y >> 4))
    // ä»€ä¹ˆé¬¼ï¼Ÿå®é™…ä¸Šæ˜¯ 10x * 0.3125y
}

// âœ… å¹³è¡¡æ€§èƒ½å’Œå¯è¯»æ€§
fun calculate(x: u64, y: u64): u64 {
    let factor_x = x * 10;          // æ¸…æ™°çš„æ„å›¾
    let factor_y = (y * 5) / 16;    // å¯ç†è§£çš„è®¡ç®—
    factor_x * factor_y
}
```

**åæ¨¡å¼ 2: ç›²ç›®æ‰¹å¤„ç†**
```move
// âŒ å¼ºåˆ¶æ‰¹å¤„ç†æ‰€æœ‰æ“ä½œ
public entry fun process_batch(
    items: vector<ComplexItem>  // å¯èƒ½å¯¼è‡´äº¤æ˜“è¿‡å¤§ï¼Œå¤±è´¥
) {
    // å¤„ç† 1000+ é¡¹å¯èƒ½è¶…è¿‡ Gas é™åˆ¶
}

// âœ… åˆç†çš„æ‰¹æ¬¡å¤§å°
const MAX_BATCH_SIZE: u64 = 100;

public entry fun process_batch(
    items: vector<ComplexItem>
) {
    assert!(
        vector::length(&items) <= MAX_BATCH_SIZE,
        E_BATCH_TOO_LARGE
    );
    // å®‰å…¨çš„æ‰¹å¤„ç†
}
```

**åæ¨¡å¼ 3: å¿½ç•¥ç»´æŠ¤æˆæœ¬**
```move
// âŒ ä¸ºäº†èŠ‚çœ 100 Gasï¼Œå¢åŠ å·¨å¤§å¤æ‚åº¦
struct HyperOptimizedData {
    packed1: u256,  // å­˜å‚¨ field1-field32
    packed2: u256,  // å­˜å‚¨ field33-field64
    packed3: u256,  // å­˜å‚¨ field65-field96
    // éœ€è¦å¤æ‚çš„ä½è¿ç®—è®¿é—®æ¯ä¸ªå­—æ®µ
}

// âœ… åœ¨æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§é—´å¹³è¡¡
struct ReasonableData {
    critical_fields: u256,  // ä»…æ‰“åŒ…é«˜é¢‘è®¿é—®å­—æ®µ
    other_fields: OtherData, // æ­£å¸¸å­˜å‚¨
}
```

### 6.4 ä¼˜åŒ–æ£€æŸ¥æ¸…å•

**ä»£ç å®¡æŸ¥æ¸…å•**ï¼š

```markdown
å­˜å‚¨ä¼˜åŒ–ï¼š
- [ ] ä½¿ç”¨åˆé€‚å¤§å°çš„æ•´æ•°ç±»å‹ï¼ˆu8/u16/u64/u128/u256ï¼‰
- [ ] è€ƒè™‘æ•°æ®æ‰“åŒ…ï¼ˆBit Packingï¼‰
- [ ] é€‰æ‹©æœ€ä¼˜æ•°æ®ç»“æ„ï¼ˆvector/SimpleMap/Tableï¼‰
- [ ] å®æ–½å»¶è¿ŸåŠ è½½
- [ ] é¿å…å­˜å‚¨å†—ä½™æ•°æ®

è®¡ç®—ä¼˜åŒ–ï¼š
- [ ] ç¼“å­˜å¾ªç¯é•¿åº¦
- [ ] é¿å…åµŒå¥—å¾ªç¯
- [ ] ä½¿ç”¨ä½è¿ç®—æ›¿ä»£ä¹˜é™¤ï¼ˆé€‚å½“æ—¶ï¼‰
- [ ] æŒ‰æ¦‚ç‡æ’åºæ¡ä»¶åˆ†æ”¯
- [ ] å‡å°‘ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨

æ‰¹é‡æ“ä½œï¼š
- [ ] è¯†åˆ«å¯æ‰¹å¤„ç†çš„æ“ä½œ
- [ ] å®ç°æ‰¹é‡æ¥å£
- [ ] è®¾ç½®åˆç†çš„æ‰¹æ¬¡ä¸Šé™
- [ ] å¤„ç†æ‰¹å¤„ç†å¤±è´¥

æµ‹è¯•éªŒè¯ï¼š
- [ ] å»ºç«‹æ€§èƒ½åŸºå‡†
- [ ] å¯¹æ¯”ä¼˜åŒ–å‰å Gas æ¶ˆè€—
- [ ] éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§
- [ ] æ£€æŸ¥æç«¯æƒ…å†µ

æ–‡æ¡£ï¼š
- [ ] è®°å½•ä¼˜åŒ–å†³ç­–
- [ ] è¯´æ˜å¤æ‚ä¼˜åŒ–çš„åŸç†
- [ ] æ ‡æ³¨ Gas æ•æ„Ÿä»£ç 
- [ ] æ›´æ–°æ€§èƒ½æŒ‡æ ‡
```

### 6.5 ä¼˜åŒ–æµç¨‹

```
1. åˆ†æé˜¶æ®µï¼ˆAnalyzeï¼‰
   â”œâ”€ è¿è¡Œ Gas Profiler
   â”œâ”€ è¯†åˆ«çƒ­ç‚¹å‡½æ•°
   â”œâ”€ åˆ†ææˆæœ¬æ„æˆ
   â””â”€ ç¡®å®šä¼˜åŒ–ç›®æ ‡

2. è®¾è®¡é˜¶æ®µï¼ˆDesignï¼‰
   â”œâ”€ é€‰æ‹©ä¼˜åŒ–ç­–ç•¥
   â”œâ”€ è¯„ä¼°å¯è¡Œæ€§
   â”œâ”€ è€ƒè™‘æƒè¡¡
   â””â”€ åˆ¶å®šå®æ–½è®¡åˆ’

3. å®æ–½é˜¶æ®µï¼ˆImplementï¼‰
   â”œâ”€ å®ç°ä¼˜åŒ–æ–¹æ¡ˆ
   â”œâ”€ ä¿æŒä»£ç è´¨é‡
   â”œâ”€ æ·»åŠ æµ‹è¯•ç”¨ä¾‹
   â””â”€ æ›´æ–°æ–‡æ¡£

4. éªŒè¯é˜¶æ®µï¼ˆVerifyï¼‰
   â”œâ”€ è¿è¡ŒåŸºå‡†æµ‹è¯•
   â”œâ”€ å¯¹æ¯”ä¼˜åŒ–æ•ˆæœ
   â”œâ”€ éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§
   â””â”€ æ£€æŸ¥è¾¹ç•Œæƒ…å†µ

5. éƒ¨ç½²é˜¶æ®µï¼ˆDeployï¼‰
   â”œâ”€ ä»£ç å®¡æŸ¥
   â”œâ”€ å®‰å…¨å®¡è®¡
   â”œâ”€ æ¸è¿›å¼å‘å¸ƒ
   â””â”€ ç›‘æ§æ€§èƒ½
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœç¤ºä¾‹

### æ¡ˆä¾‹ 1: ä»£å¸æ‰¹é‡è½¬è´¦

```
ä¼˜åŒ–å‰ï¼ˆå•ä¸ªè½¬è´¦ Ã— 100ï¼‰ï¼š
- Gas æ¶ˆè€—: 150,000
- äº¤æ˜“æ•°: 100
- æ€»æ—¶é—´: ~500s

ä¼˜åŒ–åï¼ˆæ‰¹é‡è½¬è´¦ï¼‰ï¼š
- Gas æ¶ˆè€—: 51,000
- äº¤æ˜“æ•°: 1
- æ€»æ—¶é—´: ~5s

æ”¹è¿›ï¼š
- Gas èŠ‚çœ: 66%
- æ—¶é—´èŠ‚çœ: 99%
- ç”¨æˆ·ä½“éªŒ: æ˜¾è‘—æå‡
```

### æ¡ˆä¾‹ 2: NFT Mint

```
ä¼˜åŒ–å‰ï¼ˆé€ä¸ª mintï¼‰ï¼š
- å•æ¬¡ Gas: 8,000
- 1000 ä¸ª NFT: 8,000,000 Gas

ä¼˜åŒ–åï¼ˆæ‰¹é‡ mint + å­˜å‚¨ä¼˜åŒ–ï¼‰ï¼š
- æ‰¹é‡ Gas: 1,200,000
- 1000 ä¸ª NFT: 1,200,000 Gas

æ”¹è¿›ï¼š
- Gas èŠ‚çœ: 85%
- æˆæœ¬é™ä½: 6.8x
```

### æ¡ˆä¾‹ 3: æ•°æ®æŸ¥è¯¢

```
ä¼˜åŒ–å‰ï¼ˆé€ä¸ªè¯»å–ï¼‰ï¼š
- è¯»å– 100 ä¸ªç”¨æˆ·: 500,000 Gas
- å»¶è¿Ÿ: é«˜

ä¼˜åŒ–åï¼ˆä½¿ç”¨ SmartTable + æ‰¹é‡è¯»å–ï¼‰ï¼š
- è¯»å– 100 ä¸ªç”¨æˆ·: 120,000 Gas
- å»¶è¿Ÿ: ä½

æ”¹è¿›ï¼š
- Gas èŠ‚çœ: 76%
- æŸ¥è¯¢é€Ÿåº¦: 4x æå‡
```

---

## ğŸ¯ æ€»ç»“

Gas ä¼˜åŒ–çš„æ ¸å¿ƒåŸåˆ™ï¼š

1. **æµ‹é‡ä¼˜å…ˆ**ï¼šå…ˆæµ‹é‡ï¼Œå†ä¼˜åŒ–
2. **çƒ­ç‚¹èšç„¦**ï¼šä¼˜åŒ–é«˜å½±å“åŒºåŸŸ
3. **æƒè¡¡å¹³è¡¡**ï¼šæ€§èƒ½ vs å¯è¯»æ€§ vs ç»´æŠ¤æ€§
4. **æŒç»­ç›‘æ§**ï¼šå»ºç«‹åŸºå‡†ï¼ŒæŒç»­æ”¹è¿›
5. **æ–‡æ¡£å®Œå–„**ï¼šè®°å½•å†³ç­–å’Œå®ç°

è®°ä½ï¼š**è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºï¼Œä½†å¿½è§†ä¼˜åŒ–ä¼šå¯¼è‡´ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒ**ã€‚æ‰¾åˆ°å¹³è¡¡ç‚¹æ˜¯å…³é”®ï¼
