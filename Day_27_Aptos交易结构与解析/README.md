# Day 27: Aptos äº¤æ˜“ç»“æ„ä¸è§£æ

## ğŸ“‹ å­¦ä¹ ç›®æ ‡

ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥å­¦ä¹  Aptos äº¤æ˜“çš„åº•å±‚ç»“æ„ï¼Œç†è§£äº¤æ˜“æ˜¯å¦‚ä½•æ„é€ ã€ç­¾åã€æäº¤å’Œæ‰§è¡Œçš„ã€‚è¿™æ˜¯å¼€å‘é“¾ä¸Šæ•°æ®å·¥å…·ã€äº¤æ˜“ç›‘æ§ç³»ç»Ÿå’Œ MEV ç­–ç•¥çš„åŸºç¡€ã€‚

### æ ¸å¿ƒç›®æ ‡
1. ğŸ” **ç†è§£äº¤æ˜“ç»“æ„** - UserTransaction çš„å®Œæ•´ç»„æˆ
2. ğŸ“¦ **Payload è§£æ** - EntryFunctionã€Scriptã€Multisig ç­‰è½½è·ç±»å‹
3. ğŸ“Š **äº‹ä»¶æå–** - ä»äº¤æ˜“ç»“æœä¸­æå–å’Œè§£æäº‹ä»¶
4. ğŸ” **ç­¾åéªŒè¯** - Ed25519 å’Œ MultiEd25519 ç­¾å
5. ğŸ› ï¸ **äº¤æ˜“è§£æå™¨** - å®ç°å®Œæ•´çš„äº¤æ˜“è§£æå·¥å…·

### å­¦ä¹ æˆæœ
- âœ… ç†è§£ Aptos äº¤æ˜“çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- âœ… èƒ½å¤Ÿè§£æ UserTransaction çš„æ‰€æœ‰å­—æ®µ
- âœ… èƒ½å¤Ÿä» Payload ä¸­æå–å‡½æ•°è°ƒç”¨ä¿¡æ¯
- âœ… èƒ½å¤Ÿè§£æå’Œè¿‡æ»¤äº¤æ˜“äº‹ä»¶
- âœ… èƒ½å¤ŸéªŒè¯äº¤æ˜“ç­¾åçš„æœ‰æ•ˆæ€§
- âœ… èƒ½å¤Ÿæ„å»ºäº¤æ˜“ç›‘æ§å’Œåˆ†æå·¥å…·

---

## ğŸ“š å­¦ä¹ è·¯çº¿å›¾

```
09:00 - 10:30  ğŸ“– ç†è®ºå­¦ä¹ 
               â”œâ”€ Aptos äº¤æ˜“ç”Ÿå‘½å‘¨æœŸ
               â”œâ”€ UserTransaction ç»“æ„
               â”œâ”€ Payload ç±»å‹è¯¦è§£
               â””â”€ äº‹ä»¶ç³»ç»Ÿæ¶æ„

10:30 - 11:30  ğŸ’» ä»£ç å­¦ä¹ 
               â”œâ”€ äº¤æ˜“ç»“æ„è§£æç¤ºä¾‹
               â”œâ”€ Payload æå–å’Œè§£æ
               â”œâ”€ äº‹ä»¶è¿‡æ»¤å’Œè§£æ
               â””â”€ ç­¾åéªŒè¯å®ç°

11:30 - 14:30  ğŸ”¨ å®è·µä»»åŠ¡
               â”œâ”€ å®ç°äº¤æ˜“è§£æå™¨
               â”œâ”€ å®ç°äº‹ä»¶è¿‡æ»¤å™¨
               â”œâ”€ æ„å»ºäº¤æ˜“åˆ†æå·¥å…·
               â””â”€ ç¼–å†™å®Œæ•´æµ‹è¯•

14:30 - 15:30  ğŸ“ æ¯æ—¥è€ƒè¯•
               â”œâ”€ é€‰æ‹©é¢˜ï¼ˆ20 é¢˜ï¼‰
               â”œâ”€ ç¼–ç¨‹é¢˜ï¼ˆ3 é¢˜ï¼‰
               â””â”€ è‡ªæˆ‘è¯„åˆ†
```

**é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š6-7 å°æ—¶

---

## ğŸ“ å‰ç½®çŸ¥è¯†

åœ¨å¼€å§‹ä»Šå¤©çš„å­¦ä¹ ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»æŒæ¡ï¼š

- âœ… Day 1-5: Move è¯­è¨€åŸºç¡€
- âœ… Day 8: äº‹ä»¶ç³»ç»ŸåŸºç¡€
- âœ… ç†è§£ BCS (Binary Canonical Serialization) ç¼–ç 
- âœ… åŸºæœ¬çš„å¯†ç å­¦çŸ¥è¯†ï¼ˆç­¾åã€å“ˆå¸Œï¼‰
- âœ… JSON å’Œåå…­è¿›åˆ¶ç¼–ç 

---

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### ä»€ä¹ˆæ˜¯ UserTransactionï¼Ÿ

**UserTransaction** æ˜¯ç”¨æˆ·å‘èµ·çš„äº¤æ˜“ï¼ŒåŒ…å«å®Œæ•´çš„äº¤æ˜“ä¿¡æ¯å’Œç­¾åã€‚å®ƒæ˜¯ Aptos åŒºå—é“¾ä¸Šæœ€å¸¸è§çš„äº¤æ˜“ç±»å‹ã€‚

```
UserTransaction ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            UserTransaction               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sender: AccountAddress                  â”‚  å‘é€è€…åœ°å€
â”‚ sequence_number: u64                    â”‚  è´¦æˆ·åºåˆ—å·
â”‚ payload: TransactionPayload             â”‚  äº¤æ˜“è½½è·
â”‚ max_gas_amount: u64                     â”‚  æœ€å¤§ gas æ•°é‡
â”‚ gas_unit_price: u64                     â”‚  gas å•ä»·
â”‚ expiration_timestamp_secs: u64          â”‚  è¿‡æœŸæ—¶é—´æˆ³
â”‚ chain_id: ChainId                       â”‚  é“¾ ID
â”‚ signature: Signature                    â”‚  ç­¾å
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤æ˜“ç”Ÿå‘½å‘¨æœŸ

```
1. æ„é€  â†’ 2. ç­¾å â†’ 3. æäº¤ â†’ 4. éªŒè¯ â†’ 5. æ‰§è¡Œ â†’ 6. ç¡®è®¤
   â†“         â†“         â†“         â†“         â†“         â†“
 Payload   Ed25519   Mempool  VMéªŒè¯    çŠ¶æ€æ›´æ–°   äº‹ä»¶å‘å‡º
```

### Payload ç±»å‹

1. **EntryFunction** - æœ€å¸¸ç”¨ï¼Œè°ƒç”¨æ¨¡å—çš„ entry å‡½æ•°
2. **Script** - æ‰§è¡Œè‡ªå®šä¹‰è„šæœ¬ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰
3. **Multisig** - å¤šç­¾äº¤æ˜“
4. **ModuleBundle** - éƒ¨ç½²æ¨¡å—ï¼ˆå·²åºŸå¼ƒï¼‰

---

## ğŸ“ ä»Šæ—¥æ–‡ä»¶ç»“æ„

```
Day_27_Aptosäº¤æ˜“ç»“æ„ä¸è§£æ/
â”œâ”€â”€ README.md                          # ğŸ“˜ æœ¬æ–‡ä»¶ - å­¦ä¹ æŒ‡å—
â”œâ”€â”€ Move.toml                          # âš™ï¸ é¡¹ç›®é…ç½®
â”œâ”€â”€ 01_ç†è®ºå­¦ä¹ /
â”‚   â”œâ”€â”€ æ ¸å¿ƒæ¦‚å¿µ.md                    # ğŸ“š è¯¦ç»†ç†è®ºè®²è§£
â”‚   â”‚   â”œâ”€â”€ äº¤æ˜“ç”Ÿå‘½å‘¨æœŸ
â”‚   â”‚   â”œâ”€â”€ UserTransaction è¯¦è§£
â”‚   â”‚   â”œâ”€â”€ Payload ç±»å‹åˆ†æ
â”‚   â”‚   â”œâ”€â”€ äº‹ä»¶ç³»ç»Ÿæ·±å…¥
â”‚   â”‚   â””â”€ ç­¾åå’ŒéªŒè¯
â”‚   â””â”€â”€ ä»£ç ç¤ºä¾‹.move                  # ğŸ’¡ å®Œæ•´ä»£ç ç¤ºä¾‹
â”‚       â”œâ”€â”€ äº¤æ˜“ç»“æ„å®šä¹‰
â”‚       â”œâ”€â”€ Payload è§£æ
â”‚       â”œâ”€â”€ äº‹ä»¶æå–
â”‚       â””â”€â”€ ç­¾åéªŒè¯
â”œâ”€â”€ 02_å®è·µä»»åŠ¡/
â”‚   â””â”€â”€ ä»»åŠ¡è¯´æ˜.md                    # ğŸ¯ å®è·µä»»åŠ¡è¦æ±‚
â”‚       â”œâ”€â”€ ä»»åŠ¡ä¸€ï¼šäº¤æ˜“è§£æå™¨
â”‚       â”œâ”€â”€ ä»»åŠ¡äºŒï¼šäº‹ä»¶è¿‡æ»¤å™¨
â”‚       â”œâ”€â”€ ä»»åŠ¡ä¸‰ï¼šäº¤æ˜“åˆ†æå·¥å…·
â”‚       â””â”€â”€ ä»»åŠ¡å››ï¼šå®æ—¶ç›‘æ§
â”œâ”€â”€ 03_æ¯æ—¥è€ƒè¯•/
â”‚   â”œâ”€â”€ é€‰æ‹©é¢˜.md                      # âœï¸ 20é“é€‰æ‹©é¢˜
â”‚   â”œâ”€â”€ ç¼–ç¨‹é¢˜.md                      # ğŸ’» 3é“ç¼–ç¨‹é¢˜
â”‚   â””â”€â”€ ç­”æ¡ˆè§£æ.md                    # âœ… å®Œæ•´ç­”æ¡ˆå’Œè§£æ
â”œâ”€â”€ sources/
â”‚   â”œâ”€â”€ transaction_parser.move       # ğŸ” äº¤æ˜“è§£æå™¨
â”‚   â”œâ”€â”€ payload_extractor.move        # ğŸ“¦ è½½è·æå–å™¨
â”‚   â”œâ”€â”€ event_filter.move             # ğŸ“Š äº‹ä»¶è¿‡æ»¤å™¨
â”‚   â””â”€â”€ signature_verifier.move       # ğŸ” ç­¾åéªŒè¯å™¨
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ parse_transaction.move        # è§£æäº¤æ˜“è„šæœ¬
â”‚   â”œâ”€â”€ filter_events.move            # è¿‡æ»¤äº‹ä»¶è„šæœ¬
â”‚   â””â”€â”€ analyze_txn_batch.move        # æ‰¹é‡åˆ†æè„šæœ¬
â””â”€â”€ tests/
    â”œâ”€â”€ parser_test.move              # è§£æå™¨æµ‹è¯•
    â”œâ”€â”€ event_test.move               # äº‹ä»¶æµ‹è¯•
    â””â”€â”€ integration_test.move         # é›†æˆæµ‹è¯•
```

---

## ğŸš€ å¼€å§‹å­¦ä¹ 

### Step 1: ç†è®ºå­¦ä¹ ï¼ˆ90åˆ†é’Ÿï¼‰

é˜…è¯» `01_ç†è®ºå­¦ä¹ /æ ¸å¿ƒæ¦‚å¿µ.md`ï¼Œé‡ç‚¹ç†è§£ï¼š

**äº¤æ˜“ç”Ÿå‘½å‘¨æœŸï¼ˆ20åˆ†é’Ÿï¼‰**
- äº¤æ˜“çš„å…­ä¸ªé˜¶æ®µ
- æ¯ä¸ªé˜¶æ®µçš„å…³é”®æ“ä½œ
- äº¤æ˜“çŠ¶æ€è½¬æ¢
- å¤±è´¥å¤„ç†æœºåˆ¶

**UserTransaction è¯¦è§£ï¼ˆ25åˆ†é’Ÿï¼‰**
- æ¯ä¸ªå­—æ®µçš„å«ä¹‰å’Œç”¨é€”
- sequence_number çš„ä½œç”¨
- gas æœºåˆ¶è¯¦è§£
- expiration è®¾è®¡åŸç†
- BCS ç¼–ç æ ¼å¼

**Payload ç±»å‹åˆ†æï¼ˆ25åˆ†é’Ÿï¼‰**
- EntryFunction ç»“æ„å’Œä½¿ç”¨
- Script çš„å·®å¼‚å’Œåœºæ™¯
- Multisig å¤šç­¾æœºåˆ¶
- å¦‚ä½•ä» Payload æå–è°ƒç”¨ä¿¡æ¯

**äº‹ä»¶ç³»ç»Ÿæ·±å…¥ï¼ˆ20åˆ†é’Ÿï¼‰**
- Event ç»“æ„å’Œå­—æ®µ
- EventHandle æœºåˆ¶
- äº‹ä»¶ç´¢å¼•å’ŒæŸ¥è¯¢
- äº‹ä»¶æ•°æ®è§£æ

**å­¦ä¹ å»ºè®®**ï¼š
- ğŸ“ ç»˜åˆ¶äº¤æ˜“ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾
- ğŸ” å¯¹æ¯”ä¸åŒ Payload ç±»å‹
- ğŸ¤” æ€è€ƒä¸ºä»€ä¹ˆéœ€è¦ sequence_number

### Step 2: ä»£ç å­¦ä¹ ï¼ˆ60åˆ†é’Ÿï¼‰

ç ”ç©¶ `01_ç†è®ºå­¦ä¹ /ä»£ç ç¤ºä¾‹.move`ï¼Œç†è§£ï¼š

**äº¤æ˜“ç»“æ„å®šä¹‰ï¼ˆ15åˆ†é’Ÿï¼‰**
- UserTransaction çš„ Move è¡¨ç¤º
- å­—æ®µç±»å‹å’ŒéªŒè¯
- BCS åºåˆ—åŒ–

**Payload è§£æï¼ˆ20åˆ†é’Ÿï¼‰**
- EntryFunction æå–
- æ¨¡å—åœ°å€ã€åç§°ã€å‡½æ•°åè§£æ
- å‚æ•°ç±»å‹å’Œå€¼æå–

**äº‹ä»¶æå–ï¼ˆ15åˆ†é’Ÿï¼‰**
- ä»äº¤æ˜“ç»“æœè·å–äº‹ä»¶
- äº‹ä»¶ç±»å‹åˆ¤æ–­
- äº‹ä»¶æ•°æ®ååºåˆ—åŒ–

**ç­¾åéªŒè¯ï¼ˆ10åˆ†é’Ÿï¼‰**
- Ed25519 ç­¾åéªŒè¯
- MultiEd25519 å¤šç­¾éªŒè¯
- å…¬é’¥æ¢å¤

**å­¦ä¹ å»ºè®®**ï¼š
- ğŸ” è¿½è¸ªæ•°æ®æµè½¬è¿‡ç¨‹
- ğŸ’­ ç†è§£ BCS ç¼–ç ç»†èŠ‚
- ğŸ“Š å¯¹æ¯”ä¸åŒäº‹ä»¶ç±»å‹

### Step 3: å®è·µä»»åŠ¡ï¼ˆ3å°æ—¶ï¼‰

å®Œæˆ `02_å®è·µä»»åŠ¡/ä»»åŠ¡è¯´æ˜.md` ä¸­çš„è¦æ±‚ï¼š

**ä»»åŠ¡ä¸€ï¼šäº¤æ˜“è§£æå™¨ï¼ˆ60åˆ†é’Ÿï¼‰**
- å®ç° parse_user_transaction å‡½æ•°
- æå–æ‰€æœ‰å…³é”®å­—æ®µ
- å¤„ç†ä¸åŒ Payload ç±»å‹
- ç¼–å†™å•å…ƒæµ‹è¯•

**ä»»åŠ¡äºŒï¼šäº‹ä»¶è¿‡æ»¤å™¨ï¼ˆ45åˆ†é’Ÿï¼‰**
- å®ç°äº‹ä»¶ç±»å‹è¿‡æ»¤
- å®ç°äº‹ä»¶åœ°å€è¿‡æ»¤
- æ”¯æŒå¤æ‚æŸ¥è¯¢æ¡ä»¶
- ç¼–å†™æµ‹è¯•ç”¨ä¾‹

**ä»»åŠ¡ä¸‰ï¼šäº¤æ˜“åˆ†æå·¥å…·ï¼ˆ60åˆ†é’Ÿï¼‰**
- ç»Ÿè®¡äº¤æ˜“ gas ä½¿ç”¨
- åˆ†æå‡½æ•°è°ƒç”¨é¢‘ç‡
- æ£€æµ‹å¼‚å¸¸äº¤æ˜“æ¨¡å¼
- ç”Ÿæˆåˆ†ææŠ¥å‘Š

**ä»»åŠ¡å››ï¼šå®æ—¶ç›‘æ§ï¼ˆ15åˆ†é’Ÿï¼‰**
- é›†æˆåˆ°ç›‘æ§ç³»ç»Ÿ
- æ·»åŠ å‘Šè­¦åŠŸèƒ½
- æµ‹è¯•å®Œæ•´æµç¨‹

**å®è·µå»ºè®®**ï¼š
- âš¡ å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†ä¼˜åŒ–
- ğŸ§ª å……åˆ†æµ‹è¯•è¾¹ç•Œæƒ…å†µ
- ğŸ›¡ï¸ å¤„ç†è§£æå¤±è´¥åœºæ™¯

### Step 4: æ¯æ—¥è€ƒè¯•ï¼ˆ60åˆ†é’Ÿï¼‰

å®Œæˆ `03_æ¯æ—¥è€ƒè¯•/` ä¸­çš„æ‰€æœ‰é¢˜ç›®ï¼š
- 20 é“é€‰æ‹©é¢˜ï¼ˆæ¯é¢˜ 2 åˆ†ï¼‰
- 3 é“ç¼–ç¨‹é¢˜ï¼ˆæ¯é¢˜ 20 åˆ†ï¼‰

**è€ƒè¯•è¦æ±‚**ï¼š
- âœ… ç‹¬ç«‹å®Œæˆï¼Œä¸æŸ¥çœ‹ç­”æ¡ˆ
- â±ï¸ é™æ—¶ 60 åˆ†é’Ÿ
- ğŸ¯ ç›®æ ‡åˆ†æ•° â‰¥ 70 åˆ†

---

## ğŸ’¡ é‡ç‚¹æç¤º

### âš ï¸ å¸¸è§é™·é˜±

1. **å¿½ç•¥ BCS ç¼–ç **
   ```move
   // âŒ é”™è¯¯ï¼šç›´æ¥è§£æäºŒè¿›åˆ¶æ•°æ®
   let data = *vector::borrow(&raw_data, 0);
   
   // âœ… æ­£ç¡®ï¼šä½¿ç”¨ BCS ååºåˆ—åŒ–
   let transaction: UserTransaction = bcs::from_bytes(&raw_data);
   ```

2. **æœªéªŒè¯ç­¾å**
   ```move
   // âŒ é”™è¯¯ï¼šä¸éªŒè¯ç­¾åç›´æ¥å¤„ç†
   process_transaction(txn);
   
   // âœ… æ­£ç¡®ï¼šå…ˆéªŒè¯ç­¾å
   assert!(verify_signature(&txn), ERROR_INVALID_SIGNATURE);
   process_transaction(txn);
   ```

3. **å¿½ç•¥äº¤æ˜“è¿‡æœŸ**
   ```move
   // âŒ é”™è¯¯ï¼šä¸æ£€æŸ¥è¿‡æœŸæ—¶é—´
   execute_transaction(txn);
   
   // âœ… æ­£ç¡®ï¼šæ£€æŸ¥æ˜¯å¦è¿‡æœŸ
   let current_time = timestamp::now_seconds();
   assert!(
       txn.expiration_timestamp_secs > current_time,
       ERROR_TRANSACTION_EXPIRED
   );
   ```

4. **äº‹ä»¶ç±»å‹æ··æ·†**
   ```move
   // âŒ é”™è¯¯ï¼šå‡è®¾äº‹ä»¶ç±»å‹
   let swap_event: SwapEvent = parse_event(&event);
   
   // âœ… æ­£ç¡®ï¼šæ£€æŸ¥äº‹ä»¶ç±»å‹
   if (is_swap_event(&event)) {
       let swap_event: SwapEvent = parse_event(&event);
   }
   ```

### ğŸ”‘ å…³é”®è¦ç‚¹

1. **äº¤æ˜“éªŒè¯æ¸…å•**
   - âœ… ç­¾åæœ‰æ•ˆæ€§
   - âœ… sequence_number è¿ç»­æ€§
   - âœ… gas å‚æ•°åˆç†æ€§
   - âœ… æœªè¿‡æœŸ
   - âœ… chain_id æ­£ç¡®

2. **Payload è§£æè¦ç‚¹**
   - **EntryFunction**: æœ€å¸¸è§ï¼ŒåŒ…å«æ¨¡å—ã€å‡½æ•°ã€å‚æ•°
   - **Script**: åŒ…å«å­—èŠ‚ç å’Œå‚æ•°
   - **Multisig**: åŒ…å«å¤šä¸ªç­¾åå’Œé˜ˆå€¼

3. **äº‹ä»¶å¤„ç†ç­–ç•¥**
   - æŒ‰ç±»å‹ç´¢å¼•äº‹ä»¶
   - ç¼“å­˜å¸¸ç”¨äº‹ä»¶ç»“æ„
   - æ‰¹é‡å¤„ç†æé«˜æ•ˆç‡
   - å¤„ç†äº‹ä»¶æ•°æ®ç‰ˆæœ¬å…¼å®¹

4. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨äº‹ä»¶ç´¢å¼•åŠ é€ŸæŸ¥è¯¢
   - æ‰¹é‡è§£æäº¤æ˜“
   - ç¼“å­˜ååºåˆ—åŒ–ç»“æœ
   - å¹¶å‘å¤„ç†å¤šä¸ªäº¤æ˜“

---

## ğŸ¯ å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆä»Šå¤©çš„å­¦ä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] è§£é‡Š Aptos äº¤æ˜“çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- [ ] ç†è§£ UserTransaction çš„æ¯ä¸ªå­—æ®µ
- [ ] è§£æä¸åŒç±»å‹çš„ Payload
- [ ] ä»äº¤æ˜“ä¸­æå–äº‹ä»¶æ•°æ®
- [ ] éªŒè¯ Ed25519 å’Œ MultiEd25519 ç­¾å
- [ ] å®ç°å®Œæ•´çš„äº¤æ˜“è§£æå™¨
- [ ] æ„å»ºäº‹ä»¶è¿‡æ»¤å’ŒæŸ¥è¯¢ç³»ç»Ÿ
- [ ] åˆ†æäº¤æ˜“æ‰§è¡Œæƒ…å†µ
- [ ] æ£€æµ‹å¼‚å¸¸äº¤æ˜“æ¨¡å¼
- [ ] ä¸º MEV ç­–ç•¥æä¾›æ•°æ®åŸºç¡€

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å¿…è¯»
- [Aptos Transaction Structure](https://aptos.dev/concepts/transactions/)
- [BCS Specification](https://github.com/diem/bcs)
- [Aptos Gas Schedule](https://aptos.dev/concepts/gas-txn-fee/)
- [Event System](https://aptos.dev/concepts/events/)

### é€‰è¯»
- [Transaction Lifecycle Deep Dive](https://aptos.dev/guides/system-integrators-guide/)
- [Signature Schemes in Aptos](https://aptos.dev/concepts/accounts/#signature-schemes)
- [Indexer API Documentation](https://aptos.dev/indexer/api/)

### ä»£ç å‚è€ƒ
- [Aptos Core - Transaction Types](https://github.com/aptos-labs/aptos-core/tree/main/types/src/transaction)
- [Aptos SDK - Transaction Builder](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/typescript/sdk)
- [BCS Rust Implementation](https://github.com/aptos-labs/bcs)

---

## ğŸ”— ç›¸å…³èµ„æº

### å·¥å…·
- [Aptos Explorer](https://explorer.aptoslabs.com/) - æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…
- [Aptos CLI](https://aptos.dev/tools/aptos-cli/) - äº¤æ˜“æ„é€ å’Œæäº¤
- [BCS Playground](https://bcs.aptos.dev/) - BCS ç¼–ç æµ‹è¯•

### API ç«¯ç‚¹
- Fullnode REST API: `https://fullnode.mainnet.aptoslabs.com/v1`
- Indexer GraphQL: `https://indexer.mainnet.aptoslabs.com/v1/graphql`

### ç¤ºä¾‹é¡¹ç›®
- [Transaction Monitor](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/indexer-grpc)
- [Event Indexer](https://github.com/aptos-labs/aptos-core/tree/main/ecosystem/indexer)

---

## ğŸ“ æ¯æ—¥æ€»ç»“æ¨¡æ¿

å­¦ä¹ å®Œæˆåï¼Œè¯·ç”¨ä»¥ä¸‹æ¨¡æ¿æ€»ç»“ä»Šå¤©çš„å­¦ä¹ ï¼š

```markdown
## Day 27 å­¦ä¹ æ€»ç»“

### å­¦åˆ°çš„å…³é”®æ¦‚å¿µ
1. 
2. 
3. 

### å®Œæˆçš„ä»»åŠ¡
- [ ] ç†è®ºå­¦ä¹ 
- [ ] ä»£ç ç¤ºä¾‹ç ”ç©¶
- [ ] å®è·µä»»åŠ¡
- [ ] æ¯æ—¥è€ƒè¯•

### è€ƒè¯•æˆç»©
- é€‰æ‹©é¢˜ï¼š___/40 åˆ†
- ç¼–ç¨‹é¢˜ï¼š___/60 åˆ†
- æ€»åˆ†ï¼š___/100 åˆ†

### é‡åˆ°çš„å›°éš¾
1. 
2. 

### è§£å†³æ–¹æ¡ˆ
1. 
2. 

### äº¤æ˜“è§£æè¦ç‚¹
- UserTransaction ç»“æ„ï¼š
- Payload ç±»å‹ï¼š
- äº‹ä»¶æå–ï¼š
- ç­¾åéªŒè¯ï¼š

### å®é™…åº”ç”¨æ€è€ƒ
1. 
2. 

### æ˜å¤©çš„è®¡åˆ’
- å­¦ä¹  Day 28: Indexer ä¸ GraphQL æŸ¥è¯¢
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

å®Œæˆä»Šå¤©çš„å­¦ä¹ åï¼š

1. **å¦‚æœå¾—åˆ† â‰¥ 70 åˆ†**
   - âœ… ç»§ç»­å­¦ä¹  Day 28: Indexer ä¸ GraphQL æŸ¥è¯¢
   - ğŸ’¡ æ€è€ƒå¦‚ä½•ä¼˜åŒ–äº¤æ˜“è§£ææ€§èƒ½
   - ğŸ” ç ”ç©¶çœŸå®é¡¹ç›®çš„äº¤æ˜“åˆ†æå·¥å…·

2. **å¦‚æœå¾—åˆ† < 70 åˆ†**
   - ğŸ”„ é‡æ–°å­¦ä¹ ä»Šå¤©çš„ç†è®º
   - ğŸ’» é‡åšå®è·µä»»åŠ¡
   - ğŸ“– é˜…è¯»æ‰©å±•èµ„æ–™
   - ğŸ§ª ç¼–å†™æ›´å¤šæµ‹è¯•ç”¨ä¾‹

---

## âš¡ å¿«é€Ÿå‚è€ƒ

### UserTransaction å­—æ®µé€ŸæŸ¥

```move
struct UserTransaction {
    sender: address,                    // å‘é€è€…åœ°å€
    sequence_number: u64,               // è´¦æˆ·åºåˆ—å·ï¼ˆnonceï¼‰
    payload: TransactionPayload,        // äº¤æ˜“è½½è·
    max_gas_amount: u64,                // æœ€å¤§ gas é™åˆ¶
    gas_unit_price: u64,                // gas å•ä»·ï¼ˆOctasï¼‰
    expiration_timestamp_secs: u64,     // è¿‡æœŸæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰
    chain_id: u8,                       // é“¾ IDï¼ˆä¸»ç½‘=1ï¼‰
    signature: Signature,               // ç­¾å
}
```

### Payload ç±»å‹é€ŸæŸ¥

```move
// 1. EntryFunction - è°ƒç”¨æ¨¡å—å‡½æ•°
struct EntryFunction {
    module: ModuleId,         // æ¨¡å—æ ‡è¯†ç¬¦
    function: Identifier,     // å‡½æ•°å
    ty_args: vector<TypeTag>, // ç±»å‹å‚æ•°
    args: vector<vector<u8>>, // å‚æ•°ï¼ˆBCSç¼–ç ï¼‰
}

// 2. Script - æ‰§è¡Œè„šæœ¬
struct Script {
    code: vector<u8>,         // å­—èŠ‚ç 
    ty_args: vector<TypeTag>, // ç±»å‹å‚æ•°
    args: vector<TransactionArgument>, // å‚æ•°
}

// 3. Multisig
struct Multisig {
    multisig_address: address,
    transaction_payload: Option<MultisigTransactionPayload>,
}
```

### Event ç»“æ„é€ŸæŸ¥

```move
struct Event {
    key: EventHandle,         // äº‹ä»¶å¥æŸ„
    sequence_number: u64,     // åºåˆ—å·
    type_: TypeTag,           // äº‹ä»¶ç±»å‹
    data: vector<u8>,         // äº‹ä»¶æ•°æ®ï¼ˆBCSç¼–ç ï¼‰
}
```

### å¸¸ç”¨ API é€ŸæŸ¥

```move
// è§£æäº¤æ˜“
public fun parse_transaction(raw_txn: vector<u8>): UserTransaction {
    bcs::from_bytes<UserTransaction>(&raw_txn)
}

// æå– EntryFunction
public fun extract_entry_function(payload: &TransactionPayload): &EntryFunction {
    // å®ç°ç•¥
}

// è¿‡æ»¤äº‹ä»¶
public fun filter_events_by_type(
    events: &vector<Event>,
    event_type: String
): vector<Event> {
    // å®ç°ç•¥
}

// éªŒè¯ç­¾å
public fun verify_ed25519_signature(
    public_key: &vector<u8>,
    signature: &vector<u8>,
    message: &vector<u8>
): bool {
    // å®ç°ç•¥
}
```

### é”™è¯¯ç é€ŸæŸ¥

```
ERROR_INVALID_TRANSACTION = 400
ERROR_INVALID_SIGNATURE = 401
ERROR_EXPIRED_TRANSACTION = 402
ERROR_INVALID_SEQUENCE_NUMBER = 403
ERROR_INVALID_PAYLOAD = 404
ERROR_INVALID_EVENT = 405
ERROR_PARSING_FAILED = 406
ERROR_UNSUPPORTED_PAYLOAD_TYPE = 407
```

---

## ğŸ” äº¤æ˜“è§£ææµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ¥æ”¶åŸå§‹äº¤æ˜“æ•°æ®ï¼ˆHex/Bytesï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Step 1: BCS ååºåˆ—åŒ–                       â”‚
â”‚  - å°†å­—èŠ‚æµè§£æä¸º UserTransaction ç»“æ„                â”‚
â”‚  - éªŒè¯æ•°æ®æ ¼å¼                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Step 2: éªŒè¯äº¤æ˜“åŸºæœ¬ä¿¡æ¯                      â”‚
â”‚  - æ£€æŸ¥ chain_id                                    â”‚
â”‚  - æ£€æŸ¥ expiration_timestamp                        â”‚
â”‚  - æ£€æŸ¥ sequence_number                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Step 3: éªŒè¯ç­¾å                           â”‚
â”‚  - Ed25519 å•ç­¾éªŒè¯                                  â”‚
â”‚  - æˆ– MultiEd25519 å¤šç­¾éªŒè¯                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Step 4: è§£æ Payload                         â”‚
â”‚  - åˆ¤æ–­ Payload ç±»å‹                                 â”‚
â”‚  - EntryFunction: æå–æ¨¡å—ã€å‡½æ•°ã€å‚æ•°                â”‚
â”‚  - Script: æå–å­—èŠ‚ç å’Œå‚æ•°                           â”‚
â”‚  - Multisig: æå–å¤šç­¾ä¿¡æ¯                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Step 5: æå–å‡½æ•°è°ƒç”¨ä¿¡æ¯                       â”‚
â”‚  - æ¨¡å—åœ°å€                                          â”‚
â”‚  - æ¨¡å—åç§°                                          â”‚
â”‚  - å‡½æ•°åç§°                                          â”‚
â”‚  - ç±»å‹å‚æ•°                                          â”‚
â”‚  - å‡½æ•°å‚æ•°ï¼ˆBCSè§£ç ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Step 6: è§£ææ‰§è¡Œç»“æœ                         â”‚
â”‚  - æˆåŠŸ/å¤±è´¥çŠ¶æ€                                     â”‚
â”‚  - Gas ä½¿ç”¨é‡                                        â”‚
â”‚  - çŠ¶æ€å˜åŒ–                                          â”‚
â”‚  - å‘å‡ºçš„äº‹ä»¶                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Step 7: æå–å’Œè¿‡æ»¤äº‹ä»¶                        â”‚
â”‚  - æŒ‰ç±»å‹è¿‡æ»¤äº‹ä»¶                                    â”‚
â”‚  - è§£æäº‹ä»¶æ•°æ®                                      â”‚
â”‚  - æ„å»ºäº‹ä»¶ç´¢å¼•                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Step 8: ç”Ÿæˆè§£æç»“æœ                           â”‚
â”‚  - ç»“æ„åŒ–æ•°æ®                                        â”‚
â”‚  - JSON æ ¼å¼è¾“å‡º                                     â”‚
â”‚  - å­˜å‚¨åˆ°æ•°æ®åº“                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¼ å®æˆ˜ä»·å€¼

ä»Šå¤©å­¦ä¹ çš„äº¤æ˜“è§£ææ˜¯é“¾ä¸Šæ•°æ®åˆ†æçš„æ ¸å¿ƒï¼š

### çŸ­æœŸä»·å€¼ï¼ˆå­¦ä¹ é˜¶æ®µï¼‰
- ç†è§£ Aptos äº¤æ˜“æœºåˆ¶
- æŒæ¡ BCS ç¼–ç /è§£ç 
- å­¦ä¼šæå–é“¾ä¸Šæ•°æ®

### ä¸­æœŸä»·å€¼ï¼ˆ30å¤©åï¼‰
- å¼€å‘äº¤æ˜“ç›‘æ§å·¥å…·
- æ„å»º MEV æœºå™¨äººæ•°æ®å±‚
- å®ç°è‡ªå®šä¹‰ç´¢å¼•å™¨

### é•¿æœŸä»·å€¼ï¼ˆ60å¤©åï¼‰
- æä¾›æ•°æ®åˆ†ææœåŠ¡
- å¼€å‘é“¾ä¸Šåˆ†æå¹³å°
- å®¡è®¡äº¤æ˜“å®‰å…¨æ€§
- æ£€æµ‹å¼‚å¸¸äº¤æ˜“æ¨¡å¼

---

## ğŸŒŸ äº¤æ˜“è§£ææœ€ä½³å®è·µ

### Do's âœ…
1. **æ€»æ˜¯éªŒè¯ç­¾å**
2. **æ£€æŸ¥äº¤æ˜“è¿‡æœŸæ—¶é—´**
3. **ä½¿ç”¨ BCS æ ‡å‡†åº“**
4. **å¤„ç†è§£æå¤±è´¥æƒ…å†µ**
5. **æ‰¹é‡å¤„ç†æé«˜æ•ˆç‡**
6. **ç¼“å­˜å¸¸ç”¨æ•°æ®ç»“æ„**
7. **è®°å½•è§£æé”™è¯¯æ—¥å¿—**

### Don'ts âŒ
1. **ä¸è¦è·³è¿‡ç­¾åéªŒè¯**
2. **ä¸è¦å‡è®¾äº¤æ˜“æ ¼å¼**
3. **ä¸è¦å¿½ç•¥é”™è¯¯å¤„ç†**
4. **ä¸è¦é€ä¸ªå¤„ç†äº¤æ˜“ï¼ˆåº”æ‰¹é‡ï¼‰**
5. **ä¸è¦ç¡¬ç¼–ç  Payload ç±»å‹**
6. **ä¸è¦å¿½ç•¥äº‹ä»¶ç‰ˆæœ¬å…¼å®¹æ€§**

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬æ·±å…¥ Aptos äº¤æ˜“çš„åº•å±‚æœºåˆ¶ï¼ğŸ”**

**ç‰ˆæƒå£°æ˜**: æœ¬è¯¾ç¨‹ææ–™ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

**æ›´æ–°æ—¥æœŸ**: 2025-11-12
