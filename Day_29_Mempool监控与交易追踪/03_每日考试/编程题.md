# Day 29 æ¯æ—¥è€ƒè¯• - ç¼–ç¨‹é¢˜

**è€ƒè¯•æ—¶é—´**: 30åˆ†é’Ÿ  
**æ€»åˆ†**: 60åˆ†  
**åŠæ ¼åˆ†æ•°**: 42åˆ†ï¼ˆ70%ï¼‰

---

## ğŸ“ ç­”é¢˜è¯´æ˜

- å…±3é“ç¼–ç¨‹é¢˜
- å¯ä»¥ä½¿ç”¨ TypeScript æˆ– Python
- æ³¨é‡ä»£ç è´¨é‡å’Œé”™è¯¯å¤„ç†
- å®Œæˆåå¯¹ç…§ã€Šç­”æ¡ˆè§£æ.mdã€‹æ£€æŸ¥

---

## ç¼–ç¨‹é¢˜

### ç¬¬1é¢˜ï¼šå®ç°ç®€å•çš„äº¤æ˜“ç›‘æ§å™¨ï¼ˆ20åˆ†ï¼‰

**è¦æ±‚**:
å®ç°ä¸€ä¸ªç®€å•çš„äº¤æ˜“ç›‘æ§ç±» `SimpleMonitor`ï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š

1. è¿æ¥åˆ° Aptos Fullnode
2. è½®è¯¢è·å–æœ€æ–°äº¤æ˜“
3. è¿‡æ»¤æŒ‡å®šå‘é€è€…çš„äº¤æ˜“
4. è®°å½•äº¤æ˜“æ•°é‡

**å‡½æ•°ç­¾å**:
```typescript
class SimpleMonitor {
  constructor(nodeUrl: string);
  
  // å¼€å§‹ç›‘æ§æŒ‡å®šåœ°å€çš„äº¤æ˜“
  async start(address: string, interval: number): Promise<void>;
  
  // åœæ­¢ç›‘æ§
  stop(): void;
  
  // è·å–ç›‘æ§åˆ°çš„äº¤æ˜“æ•°é‡
  getTransactionCount(): number;
}
```

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
const monitor = new SimpleMonitor('https://fullnode.testnet.aptoslabs.com/v1');
await monitor.start('0x1', 2000); // æ¯2ç§’æ£€æŸ¥ä¸€æ¬¡
// ... è¿è¡Œä¸€æ®µæ—¶é—´å
monitor.stop();
console.log(monitor.getTransactionCount()); // åº”è¯¥è¾“å‡ºç›‘æ§åˆ°çš„äº¤æ˜“æ•°
```

**è¯„åˆ†æ ‡å‡†**:
- æ­£ç¡®å®ç°è½®è¯¢é€»è¾‘ï¼š8åˆ†
- æ­£ç¡®è¿‡æ»¤äº¤æ˜“ï¼š6åˆ†
- æ­£ç¡®å¯åŠ¨å’Œåœæ­¢ï¼š4åˆ†
- ä»£ç è´¨é‡å’Œé”™è¯¯å¤„ç†ï¼š2åˆ†

**ä½ çš„ç­”æ¡ˆ**:
```typescript
// åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä»£ç 




```

---

### ç¬¬2é¢˜ï¼šå®ç°äº¤æ˜“çŠ¶æ€è¿½è¸ªå™¨ï¼ˆ20åˆ†ï¼‰

**è¦æ±‚**:
å®ç°ä¸€ä¸ªäº¤æ˜“çŠ¶æ€è¿½è¸ªå™¨ `StatusTracker`ï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š

1. è¿½è¸ªäº¤æ˜“ä»æäº¤åˆ°ç¡®è®¤
2. è®°å½•çŠ¶æ€å˜åŒ–
3. æ”¯æŒè¶…æ—¶å¤„ç†
4. è®¡ç®—ç¡®è®¤æ—¶é—´

**å‡½æ•°ç­¾å**:
```typescript
enum TxStatus {
  PENDING = 'pending',
  CONFIRMED = 'confirmed',
  TIMEOUT = 'timeout'
}

interface TrackResult {
  hash: string;
  status: TxStatus;
  submitTime: number;
  confirmTime?: number;
  confirmationDuration?: number; // æ¯«ç§’
}

class StatusTracker {
  constructor(nodeUrl: string);
  
  // è¿½è¸ªäº¤æ˜“ç›´åˆ°ç¡®è®¤æˆ–è¶…æ—¶
  async track(txHash: string, timeout: number): Promise<TrackResult>;
}
```

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
const tracker = new StatusTracker('https://fullnode.testnet.aptoslabs.com/v1');
const result = await tracker.track('0xabc123...', 30000); // 30ç§’è¶…æ—¶
console.log(result);
// è¾“å‡ºç¤ºä¾‹:
// {
//   hash: '0xabc123...',
//   status: 'confirmed',
//   submitTime: 1699999990000,
//   confirmTime: 1699999990500,
//   confirmationDuration: 500
// }
```

**è¯„åˆ†æ ‡å‡†**:
- æ­£ç¡®å®ç°çŠ¶æ€æŸ¥è¯¢ï¼š8åˆ†
- æ­£ç¡®å¤„ç†è¶…æ—¶ï¼š6åˆ†
- æ­£ç¡®è®¡ç®—æ—¶é—´ï¼š4åˆ†
- ä»£ç è´¨é‡ï¼š2åˆ†

**ä½ çš„ç­”æ¡ˆ**:
```typescript
// åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä»£ç 




```

---

### ç¬¬3é¢˜ï¼šå®ç°å¥—åˆ©æœºä¼šæ‰«æå™¨ï¼ˆ20åˆ†ï¼‰

**è¦æ±‚**:
å®ç°ä¸€ä¸ªç®€å•çš„å¥—åˆ©æœºä¼šæ‰«æå™¨ `ArbitrageScanner`ï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š

1. æ¯”è¾ƒä¸¤ä¸ª DEX çš„ä»·æ ¼
2. è¯†åˆ«ä»·æ ¼å·®å¼‚
3. è®¡ç®—å¥—åˆ©æ”¶ç›Š
4. è¿‡æ»¤ä½æ”¶ç›Šæœºä¼š

**å‡½æ•°ç­¾å**:
```typescript
interface Price {
  dex: string;
  tokenPair: string;
  price: number;
}

interface Opportunity {
  dexA: string;
  dexB: string;
  tokenPair: string;
  priceA: number;
  priceB: number;
  profitPercent: number;
  estimatedProfit: number; // USD
}

class ArbitrageScanner {
  // æ‰«æå¥—åˆ©æœºä¼š
  scan(prices: Price[], minProfitPercent: number): Opportunity[];
  
  // è®¡ç®—é¢„æœŸæ”¶ç›Š
  calculateProfit(
    priceA: number,
    priceB: number,
    tradeAmount: number,
    feePercent: number
  ): number;
}
```

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
const scanner = new ArbitrageScanner();

const prices = [
  { dex: 'Liquidswap', tokenPair: 'APT/USDC', price: 10.0 },
  { dex: 'PancakeSwap', tokenPair: 'APT/USDC', price: 10.5 },
  { dex: 'SushiSwap', tokenPair: 'APT/USDC', price: 9.8 }
];

const opportunities = scanner.scan(prices, 1.0); // æœ€å°1%åˆ©æ¶¦
console.log(opportunities);
// åº”è¯¥æ‰¾åˆ° PancakeSwap vs SushiSwap çš„æœºä¼š (10.5 vs 9.8, ~7% å·®ä»·)
```

**è¯„åˆ†æ ‡å‡†**:
- æ­£ç¡®æ¯”è¾ƒä»·æ ¼ï¼š6åˆ†
- æ­£ç¡®è®¡ç®—åˆ©æ¶¦ç‡ï¼š6åˆ†
- æ­£ç¡®è®¡ç®—å®é™…æ”¶ç›Šï¼ˆè€ƒè™‘è´¹ç”¨ï¼‰ï¼š6åˆ†
- ä»£ç è´¨é‡ï¼š2åˆ†

**ä½ çš„ç­”æ¡ˆ**:
```typescript
// åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä»£ç 




```

---

## æäº¤è¯´æ˜

1. å°†ä½ çš„ä»£ç ä¿å­˜ä¸º `.ts` æ–‡ä»¶
2. ç¡®ä¿ä»£ç å¯ä»¥ç¼–è¯‘è¿è¡Œ
3. åŒ…å«å¿…è¦çš„ç±»å‹å®šä¹‰
4. æ·»åŠ é€‚å½“çš„æ³¨é‡Š

---

## è¯„åˆ†æ€»ç»“

| é¢˜ç›® | æ»¡åˆ† | å¾—åˆ† |
|------|------|------|
| ç¬¬1é¢˜ | 20åˆ† |      |
| ç¬¬2é¢˜ | 20åˆ† |      |
| ç¬¬3é¢˜ | 20åˆ† |      |
| **æ€»åˆ†** | **60åˆ†** |      |

**åŠæ ¼çº¿**: 42åˆ†ï¼ˆ70%ï¼‰

---

å®Œæˆåè¯·æŸ¥çœ‹ã€Šç­”æ¡ˆè§£æ.mdã€‹æ ¸å¯¹ç­”æ¡ˆã€‚
