# Day 09: 错误处理与断言最佳实践 - 选择题

**考试时间**: 20 分钟  
**总分**: 100 分 (每题 5 分)

---

## 第一部分: 基础概念 (30 分)

### 1. `assert!` 和 `abort` 的主要区别是什么?

A. assert! 更快  
B. abort 不能带错误码  
C. assert! 是条件检查, abort 是直接中止  
D. 没有区别

**答案**: C

---

### 2. 以下哪个是正确的 assert! 使用方式?

A. `assert!(x > 0);`  
B. `assert!(x > 0, 1);`  
C. `assert(x > 0, 1);`  
D. `assert! x > 0, 1;`

**答案**: B

---

### 3. 错误码应该使用什么类型?

A. u8  
B. u64  
C. u128  
D. bool

**答案**: B

---

### 4. 以下哪种命名方式最佳?

A. `const E1: u64 = 1;`  
B. `const error: u64 = 1;`  
C. `const ERROR_INSUFFICIENT_BALANCE: u64 = 1;`  
D. `const InsufficientBalance: u64 = 1;`

**答案**: C

---

### 5. abort 执行后会发生什么?

A. 继续执行后面的代码  
B. 返回错误但不回滚  
C. 中止执行并回滚所有状态更改  
D. 只记录错误日志

**答案**: C

---

### 6. 以下哪个不是有效的错误码分类?

A. 权限错误 (100-199)  
B. 余额错误 (200-299)  
C. 随机错误 (任意数字)  
D. 状态错误 (300-399)

**答案**: C

---

## 第二部分: 错误处理模式 (35 分)

### 7. 何时应该使用 Option 而不是 assert!?

A. 所有查询操作  
B. 查询可能不存在的数据  
C. 修改操作  
D. 权限检查

**答案**: B

---

### 8. 以下哪个是前置条件检查的最佳位置?

A. 函数结尾  
B. 函数中间  
C. 函数开始处  
D. 任意位置

**答案**: C

---

### 9. 以下哪个权限验证模式最安全?

A. 相信调用者的声明  
B. 使用 Capability 证明  
C. 不进行验证  
D. 只在前端验证

**答案**: B

---

### 10. 检查余额充足的正确方式是?

A. `assert!(balance > amount);`  
B. `assert!(balance >= amount);`  
C. `if (balance < amount) { }`  
D. 不需要检查

**答案**: B

---

### 11. 以下哪种错误消息最清晰?

A. `ERROR_1`  
B. `ERROR_BAD`  
C. `ERROR_INSUFFICIENT_BALANCE`  
D. `ERROR`

**答案**: C

---

### 12. 如何正确检查溢出?

A. 不需要检查, Move 自动处理  
B. `assert!(result > a && result > b);`  
C. `assert!(result >= a && result >= b);`  
D. `assert!(result >= a);`

**答案**: C

---

### 13. 批量操作中如何处理部分失败?

A. 全部使用 abort  
B. 全部使用 Option  
C. 关键操作用 abort, 可选操作用 Option  
D. 忽略失败

**答案**: C

---

## 第三部分: 最佳实践 (25 分)

### 14. 错误码应该如何组织?

A. 随机分配  
B. 按类别分段  
C. 都用相同的值  
D. 使用负数

**答案**: B

---

### 15. 以下哪个是错误处理的反模式?

A. 使用清晰的错误名称  
B. 使用魔法数字  
C. 早期验证参数  
D. 编写测试用例

**答案**: B

---

### 16. 如何测试预期会失败的函数?

A. 不能测试失败的函数  
B. 使用 `#[expected_failure]`  
C. 使用 try-catch  
D. 直接运行

**答案**: B

---

### 17. 何时应该使用辅助验证函数?

A. 从不使用  
B. 验证逻辑复杂或重复使用时  
C. 所有情况  
D. 只在测试中

**答案**: B

---

### 18. 错误码的文档注释应该包含什么?

A. 只有错误名称  
B. 错误原因和解决方案  
C. 不需要注释  
D. 只有错误码数字

**答案**: B

---

## 第四部分: 高级应用 (10 分)

### 19. 自定义 Result 类型的主要优势是?

A. 更快的执行速度  
B. 可以携带额外信息且不中止执行  
C. 必须使用  
D. 没有优势

**答案**: B

---

### 20. 状态机验证中, 以下哪个最重要?

A. 状态可以任意转换  
B. 验证状态转换的合法性  
C. 不需要验证  
D. 只在前端验证

**答案**: B

---

## 评分标准

- **90-100 分**: 优秀 🌟🌟🌟  
  完全掌握错误处理最佳实践

- **75-89 分**: 良好 🌟🌟  
  基本掌握, 需加强部分概念

- **60-74 分**: 及格 🌟  
  理解基础, 需要更多练习

- **60 分以下**: 需要重新学习  
  建议复习理论知识并完成实践任务

---

## 📝 答题卡

| 题号 | 答案 | 题号 | 答案 | 题号 | 答案 | 题号 | 答案 |
|------|------|------|------|------|------|------|------|
| 1    |      | 6    |      | 11   |      | 16   |      |
| 2    |      | 7    |      | 12   |      | 17   |      |
| 3    |      | 8    |      | 13   |      | 18   |      |
| 4    |      | 9    |      | 14   |      | 19   |      |
| 5    |      | 10   |      | 15   |      | 20   |      |

---

**注意事项**:
1. 独立完成, 不查阅资料
2. 每题只有一个正确答案
3. 仔细阅读题目
4. 完成后对照答案解析
